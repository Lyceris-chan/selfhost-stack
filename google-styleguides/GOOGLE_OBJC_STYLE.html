<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Google Objective-C Style Guide | styleguide</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Google Objective-C Style Guide" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Style guides for Google-originated open-source projects" />
<meta property="og:description" content="Style guides for Google-originated open-source projects" />
<link rel="canonical" href="https://google.github.io/styleguide/objcguide.html" />
<meta property="og:url" content="https://google.github.io/styleguide/objcguide.html" />
<meta property="og:site_name" content="styleguide" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Google Objective-C Style Guide" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Style guides for Google-originated open-source projects","headline":"Google Objective-C Style Guide","url":"https://google.github.io/styleguide/objcguide.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="./assets/css/style.css?v=c885dc260bf95fc8a720a03c90e2436a33d82119">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">

  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="https://google.github.io/styleguide/">styleguide</a></h1>
      

      <h1 id="google-objective-c-style-guide">Google Objective-C Style Guide</h1>

<blockquote>
  <p>Objective-C is a dynamic, object-oriented extension of C. It’s designed to be
easy to use and read, while enabling sophisticated object-oriented design. It
is one of the primary development languages for applications on Apple
platforms.</p>

  <p>Apple has already written a very good, and widely accepted, <a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html">Cocoa Coding
Guidelines</a>
for Objective-C. Please read it in addition to this guide.</p>

  <p>The purpose of this document is to describe the Objective-C (and
Objective-C++) coding guidelines and practices. These guidelines have evolved
and been proven over time on other projects and teams.
Open-source projects developed by Google conform to the requirements in this guide.</p>

  <p>Note that this guide is not an Objective-C tutorial. We assume that the reader
is familiar with the language. If you are new to Objective-C or need a
refresher, please read <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html">Programming with
Objective-C</a>.</p>
</blockquote>

<h2 id="principles">Principles</h2>

<h3 id="optimize-for-the-reader-not-the-writer">Optimize for the reader, not the writer</h3>

<p>Codebases often have extended lifetimes and more time is spent reading the code
than writing it. We explicitly choose to optimize for the experience of our
average software engineer reading, maintaining, and debugging code in our
codebase rather than the ease of writing said code. For example, when something
surprising or unusual is happening in a snippet of code, leaving textual hints
for the reader is valuable.</p>

<h3 id="be-consistent">Be consistent</h3>

<p>When the style guide allows multiple options it is preferable to pick one option
over mixed usage of multiple options. Using one style consistently throughout a
codebase lets engineers focus on other (more important) issues. Consistency also
enables better automation because consistent code allows more efficient
development and operation of tools that format or refactor code. In many cases,
rules that are attributed to “Be Consistent” boil down to “Just pick one and
stop worrying about it”; the potential value of allowing flexibility on these
points is outweighed by the cost of having people argue over them.</p>

<h3 id="be-consistent-with-apple-sdks">Be consistent with Apple SDKs</h3>

<p>Consistency with the way Apple SDKs use Objective-C has value for the same
reasons as consistency within our code base. If an Objective-C feature solves a
problem that’s an argument for using it. However, sometimes language features
and idioms are flawed, or were just designed with assumptions that are not
universal. In those cases it is appropriate to constrain or ban language
features or idioms.</p>

<h3 id="style-rules-should-pull-their-weight">Style rules should pull their weight</h3>

<p>The benefit of a style rule must be large enough to justify asking engineers to
remember it. The benefit is measured relative to the codebase we would get
without the rule, so a rule against a very harmful practice may still have a
small benefit if people are unlikely to do it anyway. This principle mostly
explains the rules we don’t have, rather than the rules we do: for example, goto
contravenes many of the following principles, but is not discussed due to its
extreme rarity.</p>

<p><a id="Example"></a></p>

<h2 id="example">Example</h2>

<p>They say an example is worth a thousand words, so let’s start off with an
example that should give you a feel for the style, spacing, naming, and so on.</p>

<p>Here is an example header file, demonstrating the correct commenting and spacing
for an <code class="language-plaintext highlighter-rouge">@interface</code> declaration.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cp">#import &lt;Foundation/Foundation.h&gt;
</span>
<span class="k">@class</span> <span class="nc">Bar</span><span class="p">;</span>

<span class="cm">/**
 * A sample class demonstrating good Objective-C style. All interfaces,
 * categories, and protocols (read: all non-trivial top-level declarations
 * in a header) MUST be commented. Comments must also be adjacent to the
 * object they're documenting.
 */</span>
<span class="k">@interface</span> <span class="nc">Foo</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="cm">/** The retained Bar. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">Bar</span> <span class="o">*</span><span class="n">bar</span><span class="p">;</span>

<span class="cm">/** The current drawing attributes. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSDictionary</span><span class="o">&lt;</span><span class="n">NSString</span> <span class="o">*</span><span class="p">,</span> <span class="n">NSNumber</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">attributes</span><span class="p">;</span>

<span class="cm">/**
 * Convenience creation method.
 * See -initWithBar: for details about @c bar.
 *
 * @param bar The string for fooing.
 * @return An instance of Foo.
 */</span>
<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">fooWithBar</span><span class="p">:(</span><span class="n">Bar</span> <span class="o">*</span><span class="p">)</span><span class="nv">bar</span><span class="p">;</span>

<span class="cm">/**
 * Initializes and returns a Foo object using the provided Bar instance.
 *
 * @param bar A string that represents a thing that does a thing.
 */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithBar</span><span class="p">:(</span><span class="n">Bar</span> <span class="o">*</span><span class="p">)</span><span class="nv">bar</span> <span class="n">NS_DESIGNATED_INITIALIZER</span><span class="p">;</span>

<span class="cm">/**
 * Does some work with @c blah.
 *
 * @param blah
 * @return YES if the work was completed; NO otherwise.
 */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">doWorkWithBlah</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">blah</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div></div>

<p>An example source file, demonstrating the correct commenting and spacing for the
<code class="language-plaintext highlighter-rouge">@implementation</code> of an interface.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cp">#import "Shared/Util/Foo.h"
</span>
<span class="k">@implementation</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="cm">/** The string used for displaying "hi". */</span>
  <span class="n">NSString</span> <span class="o">*</span><span class="n">_string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">fooWithBar</span><span class="p">:(</span><span class="n">Bar</span> <span class="o">*</span><span class="p">)</span><span class="nv">bar</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[[</span><span class="n">self</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithBar</span><span class="p">:</span><span class="n">bar</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="n">init</span> <span class="p">{</span>
  <span class="c1">// Classes with a custom designated initializer should always override</span>
  <span class="c1">// the superclass's designated initializer.</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">initWithBar</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithBar</span><span class="p">:(</span><span class="n">Bar</span> <span class="o">*</span><span class="p">)</span><span class="nv">bar</span> <span class="p">{</span>
  <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_bar</span> <span class="o">=</span> <span class="p">[</span><span class="n">bar</span> <span class="nf">copy</span><span class="p">];</span>
    <span class="n">_string</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSString</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFormat</span><span class="p">:</span><span class="s">@"hi %d"</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>
    <span class="n">_attributes</span> <span class="o">=</span> <span class="p">@{</span>
      <span class="s">@"color"</span> <span class="o">:</span> <span class="n">UIColor</span><span class="p">.</span><span class="n">blueColor</span><span class="p">,</span>
      <span class="s">@"hidden"</span> <span class="o">:</span> <span class="nb">@NO</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="nf">doWorkWithBlah</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">blah</span> <span class="p">{</span>
  <span class="c1">// Work should be done here.</span>
  <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</code></pre></div></div>

<p><a id="Naming"></a></p>

<h2 id="naming">Naming</h2>

<p>Names should be as descriptive as possible, within reason. Follow standard
<a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html">Objective-C naming
rules</a>.</p>

<p>Avoid non-standard abbreviations (including non-standard acronyms and
initialisms). Don’t worry about saving horizontal space as it is far more
important to make your code immediately understandable by a new reader. For
example:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// Good names.</span>
<span class="kt">int</span> <span class="n">numberOfErrors</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">completedConnectionsCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">tickets</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
<span class="n">userInfo</span> <span class="o">=</span> <span class="p">[</span><span class="n">someObject</span> <span class="nf">object</span><span class="p">];</span>
<span class="n">port</span> <span class="o">=</span> <span class="p">[</span><span class="n">network</span> <span class="nf">port</span><span class="p">];</span>
<span class="n">NSDate</span> <span class="o">*</span><span class="n">gAppLaunchDate</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="c1">// Names to avoid.</span>
<span class="kt">int</span> <span class="n">w</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nerr</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">nCompConns</span><span class="p">;</span>
<span class="n">tix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
<span class="n">obj</span> <span class="o">=</span> <span class="p">[</span><span class="n">someObject</span> <span class="nf">object</span><span class="p">];</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">[</span><span class="n">network</span> <span class="nf">port</span><span class="p">];</span>
</code></pre></div></div>

<p>Any class, category, method, function, or variable name should use all capitals
for acronyms and <a href="https://en.wikipedia.org/wiki/Initialism">initialisms</a> within
(including at the beginning of) the name. This follows Apple’s standard of using
all capitals within a name for acronyms such as URL, ID, TIFF, and EXIF.</p>

<p>Names of C functions and typedefs should be capitalized and use camel case as
appropriate for the surrounding code.</p>

<p><a id="Inclusive_Language"></a></p>

<h3 id="inclusive-language">Inclusive Language</h3>

<p>In all code, including naming and comments, use inclusive language and avoid
terms that other programmers might find disrespectful or offensive (such as
“master” and “slave”, “blacklist” and “whitelist”, or “redline”), even if the
terms also have an ostensibly neutral meaning. Similarly, use gender-neutral
language unless you’re referring to a specific person (and using their
pronouns). For example, use “they”/”them”/”their” for people of unspecified
gender (even when singular), and “it”/”its” for non-people.</p>

<p><a id="File_Names"></a></p>

<h3 id="file-names">File Names</h3>

<p>File names should reflect the name of the class implementation that they
contain—including case.</p>

<p>Follow the convention that your project uses.</p>

<p>File extensions should be as follows:</p>

<table>
  <thead>
    <tr>
      <th>Extension</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>.h</td>
      <td>C/C++/Objective-C header file</td>
    </tr>
    <tr>
      <td>.m</td>
      <td>Objective-C implementation file</td>
    </tr>
    <tr>
      <td>.mm</td>
      <td>Objective-C++ implementation file</td>
    </tr>
    <tr>
      <td>.cc</td>
      <td>Pure C++ implementation file</td>
    </tr>
    <tr>
      <td>.c</td>
      <td>C implementation file</td>
    </tr>
  </tbody>
</table>

<p>Files containing code that may be shared across projects or used in a large
project should have a clearly unique name, typically including the project or
class <a href="#prefixes">prefix</a>.</p>

<p>File names for categories should include the name of the class being extended,
like GTMNSString+Utils.h or NSTextView+GTMAutocomplete.h</p>

<h3 id="prefixes">Prefixes</h3>

<p>Prefixes are commonly required in Objective-C to avoid naming collisions in a
global namespace. Classes, protocols, global functions, and global constants
should generally be named with a prefix that begins with a capital letter
followed by one or more capital letters or numbers.</p>

<p>WARNING: Apple reserves two-letter prefixes—see
<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html">Conventions in Programming with Objective-C</a>—so
prefixes with a minimum of three characters are considered best practice.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** An example error domain. */</span>
<span class="n">GTM_EXTERN</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">GTMExampleErrorDomain</span><span class="p">;</span>

<span class="cm">/** Gets the default time zone. */</span>
<span class="n">GTM_EXTERN</span> <span class="n">NSTimeZone</span> <span class="o">*</span><span class="nf">GTMGetDefaultTimeZone</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cm">/** An example delegate. */</span>
<span class="k">@protocol</span> <span class="nc">GTMExampleDelegate</span> <span class="o">&lt;</span><span class="n">NSObject</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="cm">/** An example class. */</span>
<span class="k">@interface</span> <span class="nc">GTMExample</span> <span class="p">:</span> <span class="nc">NSObject</span>
<span class="k">@end</span>

</code></pre></div></div>

<p><a id="Class_Names"></a></p>

<h3 id="class-names">Class Names</h3>

<p>Class names (along with category and protocol names) should start as uppercase
and use mixed case to delimit words.</p>

<p>Classes and protocols in code shared across multiple applications must have an
appropriate <a href="#prefixes">prefix</a> (e.g. GTMSendMessage). Prefixes are recommended,
but not required, for other classes and protocols.</p>

<p><a id="Category_Names"></a></p>

<h3 id="category-naming">Category Naming</h3>

<p>Category names should start with an appropriate <a href="#prefixes">prefix</a> identifying
the category as part of a project or open for general use.</p>

<p>Category source file names should begin with the class being extended followed
by a plus sign and the name of the category, e.g., <code class="language-plaintext highlighter-rouge">NSString+GTMParsing.h</code>.
Methods in a category should be prefixed with a lowercase version of the prefix
used for the category name followed by an underscore (e.g.,
<code class="language-plaintext highlighter-rouge">gtm_myCategoryMethodOnAString:</code>) in order to prevent collisions in
Objective-C’s global namespace.</p>

<p>There should be a single space between the class name and the opening
parenthesis of the category.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// UIViewController+GTMCrashReporting.h</span>

<span class="cm">/** A category that adds metadata to include in crash reports to UIViewController. */</span>
<span class="k">@interface</span> <span class="nc">UIViewController</span> <span class="p">(</span><span class="nl">GTMCrashReporting</span><span class="p">)</span>

<span class="cm">/** A unique identifier to represent the view controller in crash reports. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">setter</span><span class="o">=</span><span class="n">gtm_setUniqueIdentifier</span><span class="o">:</span><span class="p">)</span> <span class="kt">int</span> <span class="n">gtm_uniqueIdentifier</span><span class="p">;</span>

<span class="cm">/** Returns an encoded representation of the view controller's current state. */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">nullable</span> <span class="n">NSData</span> <span class="o">*</span><span class="p">)</span><span class="n">gtm_encodedState</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div></div>

<p>If a class is not shared with other projects, categories extending it may omit
name prefixes and method name prefixes.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** This category extends a class that is not shared with other projects. */</span>
<span class="k">@interface</span> <span class="nc">XYZDataObject</span> <span class="p">(</span><span class="nl">Storage</span><span class="p">)</span>
<span class="k">-</span> <span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">storageIdentifier</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre></div></div>

<p><a id="Objective-C_Method_Names"></a></p>

<h3 id="objective-c-method-names">Objective-C Method Names</h3>

<p>Method and parameter names typically start as lowercase and then use mixed case.</p>

<p>Proper capitalization should be respected, including at the beginning of names.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">+</span> <span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nf">URLWithString</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">URLString</span><span class="p">;</span>
</code></pre></div></div>

<p>The method name should read like a sentence if possible, meaning you should
choose parameter names that flow with the method name. Objective-C method names
tend to be very long, but this has the benefit that a block of code can almost
read like prose, thus rendering many implementation comments unnecessary.</p>

<p>Use prepositions and conjunctions like “with”, “from”, and “to” in the second
and later parameter names only where necessary to clarify the meaning or
behavior of the method.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">addTarget</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="nv">target</span> <span class="nf">action</span><span class="p">:(</span><span class="n">SEL</span><span class="p">)</span><span class="nv">action</span><span class="p">;</span>                          <span class="c1">// GOOD; no conjunction needed</span>
<span class="k">-</span> <span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nf">convertPoint</span><span class="p">:(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nv">point</span> <span class="nf">fromView</span><span class="p">:(</span><span class="n">UIView</span> <span class="o">*</span><span class="p">)</span><span class="nv">view</span><span class="p">;</span>           <span class="c1">// GOOD; conjunction clarifies parameter</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">replaceCharactersInRange</span><span class="p">:(</span><span class="n">NSRange</span><span class="p">)</span><span class="nv">aRange</span>
            <span class="nf">withAttributedString</span><span class="p">:(</span><span class="n">NSAttributedString</span> <span class="o">*</span><span class="p">)</span><span class="nv">attributedString</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
</code></pre></div></div>

<p>If the method returns an attribute of the receiver, name the method after the
attribute.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** Returns this instance's sandwich. */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">Sandwich</span> <span class="o">*</span><span class="p">)</span><span class="n">sandwich</span><span class="p">;</span>      <span class="c1">// GOOD.</span>

<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="n">height</span><span class="p">;</span>           <span class="c1">// GOOD.</span>

<span class="c1">// GOOD; Returned value is not an attribute.</span>
<span class="k">-</span> <span class="p">(</span><span class="n">UIBackgroundTaskIdentifier</span><span class="p">)</span><span class="n">beginBackgroundTask</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="n">calculateHeight</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">theDelegate</span><span class="p">;</span>           <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>An accessor method should be named the same as the object it’s getting, but it
should not be prefixed with the word <code class="language-plaintext highlighter-rouge">get</code>. For example:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">delegate</span><span class="p">;</span>     <span class="c1">// GOOD.</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">getDelegate</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>Accessors that return the value of boolean adjectives have method names
beginning with <code class="language-plaintext highlighter-rouge">is</code>, but property names for those methods omit the <code class="language-plaintext highlighter-rouge">is</code>.</p>

<p>Dot notation is used only with property names, not with method names.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">getter</span><span class="o">=</span><span class="n">isGlorious</span><span class="p">)</span> <span class="n">BOOL</span> <span class="n">glorious</span><span class="p">;</span>
<span class="c1">// The method for the getter of the property above is:</span>
<span class="c1">// - (BOOL)isGlorious;</span>

<span class="n">BOOL</span> <span class="n">isGood</span> <span class="o">=</span> <span class="n">object</span><span class="p">.</span><span class="n">glorious</span><span class="p">;</span>      <span class="c1">// GOOD.</span>
<span class="n">BOOL</span> <span class="n">isGood</span> <span class="o">=</span> <span class="p">[</span><span class="n">object</span> <span class="nf">isGlorious</span><span class="p">];</span>  <span class="c1">// GOOD.</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">BOOL</span> <span class="n">isGood</span> <span class="o">=</span> <span class="n">object</span><span class="p">.</span><span class="n">isGlorious</span><span class="p">;</span>    <span class="c1">// AVOID.</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">NSArray</span><span class="o">&lt;</span><span class="n">Frog</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">frogs</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSArray</span><span class="o">&lt;</span><span class="n">Frog</span> <span class="o">*&gt;</span> <span class="nf">arrayWithObject</span><span class="p">:</span><span class="n">frog</span><span class="p">];</span>
<span class="n">NSEnumerator</span> <span class="o">*</span><span class="n">enumerator</span> <span class="o">=</span> <span class="p">[</span><span class="n">frogs</span> <span class="nf">reverseObjectEnumerator</span><span class="p">];</span>  <span class="c1">// GOOD.</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">NSEnumerator</span> <span class="o">*</span><span class="n">enumerator</span> <span class="o">=</span> <span class="n">frogs</span><span class="p">.</span><span class="n">reverseObjectEnumerator</span><span class="p">;</span>    <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>See <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF">Apple’s Guide to Naming
Methods</a>
for more details on Objective-C naming.</p>

<p>These guidelines are for Objective-C methods only. C++ method names continue to
follow the rules set in the C++ style guide.</p>

<p><a id="Function_Names"></a></p>

<h3 id="function-names">Function Names</h3>

<p>Function names should start with a capital letter and have a capital letter for
each new word (a.k.a. “<a href="https://en.wikipedia.org/wiki/Camel_case">camel case</a>”
or “Pascal case”).</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">AddTableEntry</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">tableEntry</span><span class="p">);</span>
<span class="k">static</span> <span class="n">BOOL</span> <span class="nf">DeleteFile</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">);</span>
</code></pre></div></div>

<p>Because Objective-C does not provide namespacing, non-static functions should
have a <a href="#prefixes">prefix</a> that minimizes the chance of a name collision.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">GTM_EXTERN</span> <span class="n">NSTimeZone</span> <span class="o">*</span><span class="nf">GTMGetDefaultTimeZone</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="n">GTM_EXTERN</span> <span class="n">NSString</span> <span class="o">*</span><span class="nf">GTMGetURLScheme</span><span class="p">(</span><span class="n">NSURL</span> <span class="o">*</span><span class="n">URL</span><span class="p">);</span>
</code></pre></div></div>

<p><a id="Variable_Names"></a></p>

<h3 id="variable-names">Variable Names</h3>

<p>Variable names typically start with a lowercase and use mixed case to delimit
words.</p>

<p>Instance variables have leading underscores. File scope or global variables have
a prefix <code class="language-plaintext highlighter-rouge">g</code>. For example: <code class="language-plaintext highlighter-rouge">myLocalVariable</code>, <code class="language-plaintext highlighter-rouge">_myInstanceVariable</code>,
<code class="language-plaintext highlighter-rouge">gMyGlobalVariable</code>.</p>

<p><a id="Common_Variable_Names"></a></p>

<h4 id="common-variable-names">Common Variable Names</h4>

<p>Readers should be able to infer the variable type from the name, but do not use
Hungarian notation for syntactic attributes, such as the static type of a
variable (int or pointer).</p>

<p>File scope or global variables (as opposed to constants) declared outside the
scope of a method or function should be rare, and should have the prefix <code class="language-plaintext highlighter-rouge">g</code>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">gGlobalCounter</span><span class="p">;</span>
</code></pre></div></div>

<p><a id="Instance_Variables"></a></p>

<h4 id="instance-variables">Instance Variables</h4>

<p>Instance variable names are mixed case and should be prefixed with an
underscore, like <code class="language-plaintext highlighter-rouge">_usernameTextField</code>.</p>

<p>NOTE: Google’s previous convention for Objective-C ivars was a trailing
underscore. Existing projects may opt to continue using trailing underscores in
new code in order to maintain consistency within the project codebase.
Consistency of prefix or suffix underscores should be maintained within each
class.</p>

<p><a id="Constants"></a></p>

<h4 id="constants">Constants</h4>

<p>Constant symbols (const global and static variables and constants created
with #define) should use mixed case to delimit words.</p>

<p>Global and file scope constants should have an appropriate <a href="#prefixes">prefix</a>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** The domain for GTL service errors. */</span>
<span class="n">GTL_EXTERN</span> <span class="n">NSString</span> <span class="o">*</span><span class="k">const</span> <span class="n">GTLServiceErrorDomain</span><span class="p">;</span>

<span class="cm">/** An enumeration of GTL service error codes. */</span>
<span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="kt">int32_t</span><span class="p">,</span> <span class="n">GTLServiceError</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/** An error code indicating that a query result was missing. */</span>
  <span class="n">GTLServiceErrorQueryResultMissing</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3000</span><span class="p">,</span>
  <span class="cm">/** An error code indicating that the query timed out. */</span>
  <span class="n">GTLServiceErrorQueryTimedOut</span>      <span class="o">=</span> <span class="o">-</span><span class="mi">3001</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Because Objective-C does not provide namespacing, constants with external
linkage should have a prefix that minimizes the chance of a name collision,
typically like <code class="language-plaintext highlighter-rouge">ClassNameConstantName</code> or <code class="language-plaintext highlighter-rouge">ClassNameEnumName</code>.</p>

<p>For interoperability with Swift code, enumerated values should have names that
extend the typedef name:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** An enumeration of supported display tinges. */</span>
<span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="kt">int32_t</span><span class="p">,</span> <span class="n">DisplayTinge</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">DisplayTingeGreen</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">DisplayTingeBlue</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div>

<p>A lowercase k can be used as a standalone prefix for constants of static storage
duration declared within implementation files:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">kFileCount</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="k">const</span> <span class="n">kUserKey</span> <span class="o">=</span> <span class="s">@"kUserKey"</span><span class="p">;</span>
</code></pre></div></div>

<p>NOTE: Previous convention was for public constant names to begin with a
lowercase k followed by a project-specific <a href="#prefixes">prefix</a>. This practice is
no longer recommended.</p>

<p><a id="Types_and_Declarations"></a></p>

<h2 id="types-and-declarations">Types and Declarations</h2>

<p><a id="Method_Declarations"></a></p>

<h3 id="method-declarations">Method Declarations</h3>

<p>As shown in the <a href="#Example">example</a>, the recommended order
for declarations in an <code class="language-plaintext highlighter-rouge">@interface</code> declaration are: properties, class methods,
initializers, and then finally instance methods. The class methods section
should begin with any convenience constructors.</p>

<p><a id="Local_Variables"></a></p>

<h3 id="local-variables">Local Variables</h3>

<p>Declare variables in the narrowest practical scopes, and close to their use.
Initialize variables in their declarations.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">CLLocation</span> <span class="o">*</span><span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">lastKnownLocation</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">meters</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">meters</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">meters</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">reportFrogsWithinRadius</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">meters</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Occasionally, efficiency will make it more appropriate to declare a variable
outside the scope of its use. This example declares meters separate from
initialization, and needlessly sends the lastKnownLocation message each time
through the loop:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="kt">int</span> <span class="n">meters</span><span class="p">;</span>                                         <span class="c1">// AVOID.</span>
<span class="k">for</span> <span class="p">(</span><span class="n">meters</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">meters</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">meters</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">CLLocation</span> <span class="o">*</span><span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">lastKnownLocation</span><span class="p">];</span>  <span class="c1">// AVOID.</span>
  <span class="n">reportFrogsWithinRadius</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="n">meters</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Under Automatic Reference Counting, strong and weak pointers to Objective-C
objects are automatically initialized to <code class="language-plaintext highlighter-rouge">nil</code>, so explicit initialization to
<code class="language-plaintext highlighter-rouge">nil</code> is not required for those common cases. However, automatic initialization
does <em>not</em> occur for many Objective-C pointer types, including object pointers
declared with the <code class="language-plaintext highlighter-rouge">__unsafe_unretained</code> ownership qualifier and CoreFoundation
object pointer types. When in doubt, prefer to initialize all Objective-C
local variables.</p>

<h3 id="static-variables">Static Variables</h3>

<p>When file scope variable/constant declarations in an implementation file do not
need to be referenced outside that file, declare them static (or in an anonymous
namespace in Objective-C++). Do not declare file scope variables or constants
with static storage duration (or in anonymous namespaces in Objective-C++) in .h
files.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// file: Foo.m</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">FOORequestLimit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="c1">// file: Foo.h</span>
<span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">FOORequestLimit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p><a id="Unsigned_Integers"></a></p>

<h3 id="unsigned-integers">Unsigned Integers</h3>

<p>Avoid unsigned integers except when matching types used by system interfaces.</p>

<p>Subtle errors crop up when doing math or counting down to zero using unsigned
integers. Rely only on signed integers in math expressions except when matching
NSUInteger in system interfaces.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">NSUInteger</span> <span class="n">numberOfObjects</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="n">count</span><span class="p">;</span>
<span class="k">for</span> <span class="p">(</span><span class="n">NSInteger</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">numberOfObjects</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">counter</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">-</span><span class="k">-</span><span class="n">counter</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">for</span> <span class="p">(</span><span class="n">NSUInteger</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">numberOfObjects</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">counter</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">-</span><span class="k">-</span><span class="n">counter</span><span class="p">)</span>  <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>Unsigned integers may be used for flags and bitmasks, though often NS_OPTIONS or
NS_ENUM will be more appropriate.</p>

<p><a id="Types_with_Inconsistent_Sizes"></a></p>

<h3 id="types-with-inconsistent-sizes">Types with Inconsistent Sizes</h3>

<p>Be aware that types long, NSInteger, NSUInteger and CGFloat have sizes that
differ in 32- and 64-bit builds. Their use is appropriate when matching system
interfaces but should be avoided when dealing with APIs that
require exact sizing, e.g., proto APIs.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="kt">int32_t</span> <span class="n">scalar1</span> <span class="o">=</span> <span class="n">proto</span><span class="p">.</span><span class="n">intValue</span><span class="p">;</span>

<span class="kt">int64_t</span> <span class="n">scalar2</span> <span class="o">=</span> <span class="n">proto</span><span class="p">.</span><span class="n">longValue</span><span class="p">;</span>

<span class="n">NSUInteger</span> <span class="n">numberOfObjects</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="n">count</span><span class="p">;</span>

<span class="n">CGFloat</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">NSInteger</span> <span class="n">scalar2</span> <span class="o">=</span> <span class="n">proto</span><span class="p">.</span><span class="n">longValue</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>File and buffer sizes often exceed 32-bit limits, so they should be declared
using <code class="language-plaintext highlighter-rouge">int64_t</code>, not with <code class="language-plaintext highlighter-rouge">long</code>, <code class="language-plaintext highlighter-rouge">NSInteger</code>, or <code class="language-plaintext highlighter-rouge">NSUInteger</code>.</p>

<p><a id="Floating_Point_Constants"></a></p>

<h4 id="floating-point-constants">Floating Point Constants</h4>

<p>When defining <code class="language-plaintext highlighter-rouge">CGFloat</code> constants, please keep in mind the following.</p>

<p>Previously for projects targeting 32-bit platforms, using <code class="language-plaintext highlighter-rouge">float</code> literals
(numbers with the <code class="language-plaintext highlighter-rouge">f</code> suffix) could be necessary to avoid type-conversion
warnings.</p>

<p>Since all Google iOS projects are now targeting only 64-bit runtime, <code class="language-plaintext highlighter-rouge">CGFloat</code>
constants may omit the suffix (use <code class="language-plaintext highlighter-rouge">double</code> values). However, teams may choose
to continue using <code class="language-plaintext highlighter-rouge">float</code> numbers for legacy code consistency, until they
eventually migrate to <code class="language-plaintext highlighter-rouge">double</code> values everywhere. Avoid a mixture of <code class="language-plaintext highlighter-rouge">float</code>
and <code class="language-plaintext highlighter-rouge">double</code> values in the same code.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// Good since CGFloat is double</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kHorizontalMargin</span> <span class="o">=</span> <span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kVerticalMargin</span> <span class="o">=</span> <span class="mi">12</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="c1">// This is OK as long as all values for CGFloat constants in your project are float</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kHorizontalMargin</span> <span class="o">=</span> <span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">;</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kVerticalMargin</span> <span class="o">=</span> <span class="mi">12</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="c1">// Avoid a mixture of float and double constants</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kHorizontalMargin</span> <span class="o">=</span> <span class="mi">8</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">;</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">CGFloat</span> <span class="n">kVerticalMargin</span> <span class="o">=</span> <span class="mi">12</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>
</code></pre></div></div>

<p><a id="Comments"></a></p>

<h2 id="comments">Comments</h2>

<p>Comments are absolutely vital to keeping our code readable. The following rules
describe what you should comment and where. But remember: while comments are
important, the best code is self-documenting. Giving sensible names to types and
variables is much better than using obscure names and then trying to explain
them through comments.</p>

<p>Pay attention to punctuation, spelling, and grammar; it is easier to read
well-written comments than badly written ones.</p>

<p>Comments should be as readable as narrative text, with proper capitalization and
punctuation. In many cases, complete sentences are more readable than sentence
fragments. Shorter comments, such as comments at the end of a line of code, can
sometimes be less formal, but use a consistent style.</p>

<p>When writing your comments, write for your audience: the next contributor who
will need to understand your code. Be generous—the next one may be you!</p>

<p><a id="File_Comments"></a></p>

<h3 id="file-comments">File Comments</h3>

<p>A file may optionally start with a description of its contents.</p>

<p>Every file may contain the following items, in order</p>
<ul>
  <li>License boilerplate if necessary. Choose the appropriate boilerplate for the
license used by the project.</li>
  <li>A basic description of the contents of the file if necessary.</li>
</ul>

<p>If you make significant changes to a file with an author line, consider deleting
the author line since revision history already provides a more detailed and
accurate record of authorship.</p>

<p><a id="Declaration_Comments"></a></p>

<h3 id="declaration-comments">Declaration Comments</h3>

<p>Every non-trivial interface, public and private, should have an accompanying
comment describing its purpose and how it fits into the larger picture.</p>

<p>Comments should be used to document classes, properties, ivars, functions,
categories, protocol declarations, and enums.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/**
 * A delegate for NSApplication to handle notifications about app
 * launch and shutdown. Owned by the main app controller.
 */</span>
<span class="k">@interface</span> <span class="nc">MyAppDelegate</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="p">{</span>
  <span class="cm">/**
   * The background task in progress, if any. This is initialized
   * to the value UIBackgroundTaskInvalid.
   */</span>
  <span class="n">UIBackgroundTaskIdentifier</span> <span class="n">_backgroundTaskID</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/** The factory that creates and manages fetchers for the app. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">GTMSessionFetcherService</span> <span class="o">*</span><span class="n">fetcherService</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre></div></div>

<p><a href="https://doxygen.nl">Doxygen</a>-style comments are encouraged for interfaces as
they are parsed by Xcode
to display formatted documentation. There is a wide variety of
<a href="https://www.doxygen.nl/manual/commands.html">Doxygen commands</a>;
use them consistently within a project.</p>

<p>If you have already described an interface in detail in the comments at the top
of your file, feel free to simply state, “See comment at top of file for a
complete description”, but be sure to have some sort of comment.</p>

<p>Additionally, each method should have a comment explaining its function,
arguments, return value, thread or queue assumptions, and any side effects.
Documentation comments should be in the header for public methods, or
immediately preceding the method for non-trivial private methods.</p>

<p>Use descriptive form (“Opens the file”) rather than imperative form (“Open the
file”) for method and function comments. The comment describes the function; it
does not tell the function what to do.</p>

<p>Document the thread usage assumptions the class, properties, or methods make, if
any. If an instance of the class can be accessed by multiple threads, take extra
care to document the rules and invariants surrounding multithreaded use.</p>

<p>Any sentinel values for properties and ivars, such as <code class="language-plaintext highlighter-rouge">NULL</code> or <code class="language-plaintext highlighter-rouge">-1</code>, should be
documented in comments.</p>

<p>Declaration comments explain how a method or function is used. Comments
explaining how a method or function is implemented should be with the
implementation rather than with the declaration.</p>

<p>Declaration comments may be omitted on test case classes and test methods
if comments would communicate no additional information beyond the method’s
name. Utility methods in tests or test-specific classes (such as helpers) should
be commented.</p>

<p><a id="Implementation_Comments"></a></p>

<h3 id="implementation-comments">Implementation Comments</h3>

<p>Provide comments explaining tricky, subtle, or complicated sections of code.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// Set the property to nil before invoking the completion handler to</span>
<span class="c1">// avoid the risk of reentrancy leading to the callback being</span>
<span class="c1">// invoked again.</span>
<span class="n">CompletionHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">completionHandler</span><span class="p">;</span>
<span class="n">self</span><span class="p">.</span><span class="n">completionHandler</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="n">handler</span><span class="p">();</span>
</code></pre></div></div>

<p>When useful, also provide comments about implementation approaches that were
considered or abandoned.</p>

<p>End-of-line comments should be separated from the code by at least 2 spaces. If
you have several comments on subsequent lines, it can often be more readable to
line them up.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">self</span> <span class="nf">doSomethingWithALongName</span><span class="p">];</span>  <span class="c1">// Two spaces before the comment.</span>
<span class="p">[</span><span class="n">self</span> <span class="nf">doSomethingShort</span><span class="p">];</span>          <span class="c1">// More spacing to align the comment.</span>
</code></pre></div></div>

<p><a id="Disambiguating_Symbols"></a></p>

<h3 id="disambiguating-symbols">Disambiguating Symbols</h3>

<p>Where needed to avoid ambiguity, use backticks or vertical bars to quote
variable names and symbols in comments in preference to using quotation marks
or naming the symbols inline.</p>

<p>In Doxygen-style comments, prefer demarcating symbols with a monospace text
command, such as <a href="https://www.doxygen.nl/manual/commands.html#cmdc"><code class="language-plaintext highlighter-rouge">@c</code></a>.</p>

<p>Demarcation helps provide clarity when a symbol is a common word that might make
the sentence read like it was poorly constructed. A common example is the symbol
<code class="language-plaintext highlighter-rouge">count</code>:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// Sometimes `count` will be less than zero.</span>
</code></pre></div></div>

<p>or when quoting something which already contains quotes</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// Remember to call `StringWithoutSpaces("foo bar baz")`</span>
</code></pre></div></div>

<p>Backticks or vertical bars are not needed when a symbol is self-apparent.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// This class serves as a delegate to GTMDepthCharge.</span>
</code></pre></div></div>

<p>Doxygen formatting is also suitable for identifying symbols.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** @param maximum The highest value for @c count. */</span>
</code></pre></div></div>

<p><a id="Object_Ownership"></a></p>

<h3 id="object-ownership">Object Ownership</h3>

<p>For objects not managed by ARC, make the pointer ownership model as explicit as
possible when it falls outside the most common Objective-C usage idioms.</p>

<p><a id="Manual_Reference_Counting"></a></p>

<h4 id="manual-reference-counting">Manual Reference Counting</h4>

<p>Instance variables for NSObject-derived objects are presumed to be retained; if
they are not retained, they should be either commented as weak or declared with
the <code class="language-plaintext highlighter-rouge">__weak</code> lifetime qualifier.</p>

<p>An exception is in Mac software for instance variables labeled as <code class="language-plaintext highlighter-rouge">@IBOutlets</code>,
which are presumed to not be retained.</p>

<p>Where instance variables are pointers to Core Foundation, C++, and other
non-Objective-C objects, they should always be declared with strong and weak
comments to indicate which pointers are and are not retained. Core Foundation
and other non-Objective-C object pointers require explicit memory management,
even when building for automatic reference counting.</p>

<p>Examples of strong and weak declarations:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@interface</span> <span class="nc">MyDelegate</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">doohickey</span><span class="p">;</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">weak</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">parent</span><span class="p">;</span>

<span class="k">@end</span>


<span class="k">@implementation</span> <span class="nc">MyDelegate</span> <span class="p">{</span>
  <span class="n">IBOutlet</span> <span class="n">NSButton</span> <span class="o">*</span><span class="n">_okButton</span><span class="p">;</span>  <span class="c1">// Normal NSControl; implicitly weak on Mac only</span>

  <span class="n">AnObjcObject</span> <span class="o">*</span><span class="n">_doohickey</span><span class="p">;</span>  <span class="c1">// My doohickey</span>
  <span class="n">__weak</span> <span class="n">MyObjcParent</span> <span class="o">*</span><span class="n">_parent</span><span class="p">;</span>  <span class="c1">// To send messages back (owns this instance)</span>

  <span class="c1">// non-NSObject pointers...</span>
  <span class="n">CWackyCPPClass</span> <span class="o">*</span><span class="n">_wacky</span><span class="p">;</span>  <span class="c1">// Strong, some cross-platform object</span>
  <span class="n">CFDictionaryRef</span> <span class="o">*</span><span class="n">_dict</span><span class="p">;</span>  <span class="c1">// Strong</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div></div>

<p><a id="Automatic_Reference_Counting"></a></p>

<h4 id="automatic-reference-counting">Automatic Reference Counting</h4>

<p>Object ownership and lifetime are explicit when using ARC, so no additional
comments are required for automatically retained objects.</p>

<p><a id="C_Language_Features"></a></p>

<h2 id="c-language-features">C Language Features</h2>

<p><a id="Macros"></a></p>

<h3 id="macros">Macros</h3>

<p>Avoid macros, especially where <code class="language-plaintext highlighter-rouge">const</code> variables, enums, Xcode snippets, or C
functions may be used instead.</p>

<p>Macros make the code you see different from the code the compiler sees. Modern C
renders traditional uses of macros for constants and utility functions
unnecessary. Macros should only be used when there is no other solution
available.</p>

<p>Where a macro is needed, use a unique name to avoid the risk of a symbol
collision in the compilation unit. If practical, keep the scope limited by
<code class="language-plaintext highlighter-rouge">#undefining</code> the macro after its use.</p>

<p>Macro names should use <code class="language-plaintext highlighter-rouge">SHOUTY_SNAKE_CASE</code>—all uppercase letters with
underscores between words. Function-like macros may use C function naming
practices. Do not define macros that appear to be C or Objective-C keywords.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cp">#define GTM_EXPERIMENTAL_BUILD ...      // GOOD
</span>
<span class="c1">// Assert unless X &gt; Y</span>
<span class="cp">#define GTM_ASSERT_GT(X, Y) ...         // GOOD, macro style.
</span>
<span class="c1">// Assert unless X &gt; Y</span>
<span class="cp">#define GTMAssertGreaterThan(X, Y) ...  // GOOD, function style.
</span></code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="cp">#define kIsExperimentalBuild ...        // AVOID
</span>
<span class="cp">#define unless(X) if(!(X))              // AVOID
</span></code></pre></div></div>

<p>Avoid macros that expand to unbalanced C or Objective-C constructs. Avoid macros
that introduce scope, or may obscure the capturing of values in blocks.</p>

<p>Avoid macros that generate class, property, or method definitions in
headers to be used as public API. These only make the code hard to
understand, and the language already has better ways of doing this.</p>

<p>Avoid macros that generate method implementations, or that generate declarations
of variables that are later used outside of the macro. Macros shouldn’t make
code hard to understand by hiding where and how a variable is declared.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="cp">#define ARRAY_ADDER(CLASS) \
  -(void)add ## CLASS ## :(CLASS *)obj toArray:(NSMutableArray *)array
</span>
<span class="n">ARRAY_ADDER</span><span class="p">(</span><span class="n">NSString</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">array</span><span class="p">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>              <span class="c1">// AVOID -- where is 'array' defined?</span>
    <span class="p">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Examples of acceptable macro use include assertion and debug logging macros
that are conditionally compiled based on build settings—often, these are
not compiled into release builds.</p>

<p><a id="Nonstandard_Extensions"></a></p>

<h3 id="nonstandard-extensions">Nonstandard Extensions</h3>

<p>Nonstandard extensions to C/Objective-C may not be used unless otherwise
specified.</p>

<p>Compilers support various extensions that are not part of standard C. Examples
include compound statement expressions (e.g. <code class="language-plaintext highlighter-rouge">foo = ({ int x; Bar(&amp;x); x })</code>).</p>

<h4 id="the-__typeof__-keyword">The <code class="language-plaintext highlighter-rouge">__typeof__</code> Keyword</h4>

<p>The <code class="language-plaintext highlighter-rouge">__typeof__</code> keyword is allowed in cases where the type doesn’t aid in
clarity for the reader. The <code class="language-plaintext highlighter-rouge">__typeof__</code> keyword is encouraged over other
similar keywords (e.g., the <code class="language-plaintext highlighter-rouge">typeof</code> keyword) as it is supported in all language
variants.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

  <span class="n">__weak</span> <span class="n">__typeof__</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="n">weakSelf</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

  <span class="n">__typeof__</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="n">copiedData</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span> <span class="nf">copy</span><span class="p">];</span>  <span class="c1">// AVOID.</span>
  <span class="n">__weak</span> <span class="n">typeof</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="n">weakSelf</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>        <span class="c1">// AVOID.</span>
</code></pre></div></div>

<h4 id="the-__auto_type-keyword-and-type-deduction">The <code class="language-plaintext highlighter-rouge">__auto_type</code> Keyword and Type Deduction</h4>

<p>Type deduction using the <code class="language-plaintext highlighter-rouge">__auto_type</code> keyword is allowed only for local
variables of block and function pointer types. Avoid type deduction if a typedef
already exists for the block or pointer type.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">__auto_type</span> <span class="n">block</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">arg1</span><span class="p">,</span> <span class="kt">int</span> <span class="n">arg2</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>
<span class="n">__auto_type</span> <span class="n">functionPointer</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">MyFunction</span><span class="p">;</span>

<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">SignInCallback</span><span class="p">)(</span><span class="n">Identity</span> <span class="o">*</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="p">);</span>
<span class="n">SignInCallback</span> <span class="n">signInCallback</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">Identity</span> <span class="o">*</span><span class="n">identity</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">__auto_type</span> <span class="n">button</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">createButtonForInfo</span><span class="p">:</span><span class="n">info</span><span class="p">];</span>
<span class="n">__auto_type</span> <span class="n">viewController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MyCustomViewControllerClass</span> <span class="nf">alloc</span><span class="p">]</span> <span class="n">initWith</span><span class="p">...];</span>

<span class="k">typedef</span> <span class="nf">void</span><span class="p">(</span><span class="o">^</span><span class="n">SignInCallback</span><span class="p">)(</span><span class="n">Identity</span> <span class="o">*</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="p">);</span>
<span class="n">__auto_type</span> <span class="n">signInCallback</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">Identity</span> <span class="o">*</span><span class="n">identity</span><span class="p">,</span> <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>
</code></pre></div></div>

<h4 id="approved-nonstandard-extensions">Approved Nonstandard Extensions</h4>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">__attribute__</code> keyword is approved as it is used in Apple API
declarations.</li>
  <li>The binary form of the conditional operator, <code class="language-plaintext highlighter-rouge">A ?: B</code>, is approved.</li>
</ul>

<p><a id="Cocoa_and_Objective-C_Features"></a></p>

<h2 id="cocoa-and-objective-c-features">Cocoa and Objective-C Features</h2>

<p><a id="Identify_Designated_Initializer"></a></p>

<h3 id="identify-designated-initializers">Identify Designated Initializers</h3>

<p>Clearly identify your designated initializer(s).</p>

<p>It is important for subclassing that a class clearly identify its designated
initializers. This allows a subclass to override a subset of initializers to
initialize subclass state or invoke a new designated initializer provided by the
subclass. Clearly identified designated initializers also make tracing through
and debugging initialization code easier.</p>

<p>Prefer identifying designated initializers by annotating them with designated
initializer attributes, e.g., <code class="language-plaintext highlighter-rouge">NS_DESIGNATED_INITIALIZER</code>. Declare designated
initializers in comments when designated initializer attributes are not
available. Prefer a single designated initializer unless there is a compelling
reason or requirement for multiple designated initializers.</p>

<p>Support initializers inherited from superclasses by
<a href="#Override_Designated_Initializer">overriding superclass designated initializers</a>
to ensure that all inherited initializers are directed through subclass
designated initializers. When there is a compelling reason or requirement that
an inherited initializer should not be supported, the initializer may be
annotated with availability attributes (e.g., <code class="language-plaintext highlighter-rouge">NS_UNAVAILABLE</code>) to discourage
usage; however, note that availability attributes alone do not completely
protect against invalid initialization.</p>

<p><a id="Override_Designated_Initializer"></a></p>

<h3 id="override-designated-initializers">Override Designated Initializers</h3>

<p>When writing a subclass that requires a new designated initializer, make sure
you override any designated initializers of the superclass.</p>

<p>When declaring designated initializers on a class, remember that any
initializers that were considered designated initializers on the superclass
become convenience initializers of the subclass unless declared otherwise.
Failure to override superclass designated initializers can result in bugs due to
invalid initialization using superclass initializers. To avoid invalid
initialization, ensure convenience initializers call through to a designated
initializer.</p>

<p><a id="Overridden_NSObject_Method_Placement"></a></p>

<h3 id="overridden-nsobject-method-placement">Overridden NSObject Method Placement</h3>

<p>Put overridden methods of NSObject at the top of an <code class="language-plaintext highlighter-rouge">@implementation</code>.</p>

<p>This commonly applies to (but is not limited to) the <code class="language-plaintext highlighter-rouge">init...</code>, <code class="language-plaintext highlighter-rouge">copyWithZone:</code>,
and <code class="language-plaintext highlighter-rouge">dealloc</code> methods. The <code class="language-plaintext highlighter-rouge">init...</code> methods should be grouped together,
including those <code class="language-plaintext highlighter-rouge">init...</code> methods that are not <code class="language-plaintext highlighter-rouge">NSObject</code> overrides, followed by
other typical <code class="language-plaintext highlighter-rouge">NSObject</code> methods such as <code class="language-plaintext highlighter-rouge">description</code>, <code class="language-plaintext highlighter-rouge">isEqual:</code>, and <code class="language-plaintext highlighter-rouge">hash</code>.</p>

<p>Convenience class factory methods for creating instances may precede the
<code class="language-plaintext highlighter-rouge">NSObject</code> methods.</p>

<p><a id="Initialization"></a></p>

<h3 id="initialization">Initialization</h3>

<p>Don’t initialize instance variables to <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">nil</code> in the <code class="language-plaintext highlighter-rouge">init</code> method; doing
so is redundant.</p>

<p>All instance variables for a newly allocated object are <a href="https://developer.apple.com/library/mac/documentation/General/Conceptual/CocoaEncyclopedia/ObjectAllocation/ObjectAllocation.html">initialized
to</a>
<code class="language-plaintext highlighter-rouge">0</code> (except for isa), so don’t clutter up the init method by re-initializing
variables to <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">nil</code>.</p>

<p><a id="Instance_Variables_In_Headers_Should_Be_@protected_or_@private"></a></p>

<h3 id="instance-variables-in-headers-should-be-protected-or-private">Instance Variables In Headers Should Be @protected or @private</h3>

<p>Instance variables should typically be declared in implementation files or
auto-synthesized by properties. When ivars are declared in a header file, they
should be marked <code class="language-plaintext highlighter-rouge">@protected</code> or <code class="language-plaintext highlighter-rouge">@private</code>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@interface</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="p">{</span>
 <span class="k">@protected</span>
  <span class="n">id</span> <span class="n">_myInstanceVariable</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div></div>

<p><a id="Avoid_+new"></a></p>

<h3 id="do-not-use-new">Do Not Use +new</h3>

<p>Do not invoke the <code class="language-plaintext highlighter-rouge">NSObject</code> class method <code class="language-plaintext highlighter-rouge">new</code>, nor override it in a subclass.
<code class="language-plaintext highlighter-rouge">+new</code> is rarely used and contrasts greatly with initializer usage. Instead, use
<code class="language-plaintext highlighter-rouge">+alloc</code> and <code class="language-plaintext highlighter-rouge">-init</code> methods to instantiate retained objects.</p>

<p><a id="Keep_the_Public_API_Simple"></a></p>

<h3 id="keep-the-public-api-simple">Keep the Public API Simple</h3>

<p>Keep your class simple; avoid “kitchen-sink” APIs. If a method doesn’t need to
be public, keep it out of the public interface.</p>

<p>Unlike C++, Objective-C doesn’t differentiate between public and private
methods; any message may be sent to an object. As a result, avoid placing
methods in the public API unless they are actually expected to be used by a
consumer of the class. This helps reduce the likelihood they’ll be called when
you’re not expecting it. This includes methods that are being overridden from
the parent class.</p>

<p>Since internal methods are not really private, it’s easy to accidentally
override a superclass’s “private” method, thus making a very difficult bug to
squash. In general, private methods should have a fairly unique name that will
prevent subclasses from unintentionally overriding them.</p>

<p><a id="#import_and_#include"></a></p>

<h3 id="import-and-include">#import and #include</h3>

<p><code class="language-plaintext highlighter-rouge">#import</code> Objective-C and Objective-C++ headers, and <code class="language-plaintext highlighter-rouge">#include</code> C/C++ headers.</p>

<p>C/C++ headers include other C/C++ headers using <code class="language-plaintext highlighter-rouge">#include</code>. Using <code class="language-plaintext highlighter-rouge">#import</code>
on C/C++ headers prevents future inclusions using <code class="language-plaintext highlighter-rouge">#include</code> and could result in
unintended compilation behavior.</p>

<p>C/C++ headers should provide their own <code class="language-plaintext highlighter-rouge">#define</code> guard.</p>

<p><a id="Order_of_Includes"></a></p>

<h3 id="order-of-includes">Order of Includes</h3>

<p>The standard order for header inclusion is the related header, operating system
headers, language library headers, and finally groups of headers for other
dependencies.</p>

<p>The related header precedes others to ensure it has no hidden dependencies.
For implementation files the related header is the header file.
For test files the related header is the header containing the tested interface.</p>

<p>Separate each non-empty group of includes with one blank line. Within each group
the includes should be ordered alphabetically.</p>

<p>Import headers using their path relative to the project’s source directory.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cp">#import "ProjectX/BazViewController.h"
</span>
<span class="cp">#import &lt;Foundation/Foundation.h&gt;
</span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="cp">#include</span> <span class="cpf">"base/basictypes.h"</span><span class="cp">
#include</span> <span class="cpf">"base/integral_types.h"</span><span class="cp">
#import "base/mac/FOOComplexNumberSupport"
#include</span> <span class="cpf">"util/math/mathutil.h"</span><span class="cp">
</span>
<span class="cp">#import "ProjectX/BazModel.h"
#import "Shared/Util/Foo.h"
</span></code></pre></div></div>

<p><a id="Use_Umbrella_Headers_for_System_Frameworks"></a></p>

<h3 id="use-umbrella-headers-for-system-frameworks">Use Umbrella Headers for System Frameworks</h3>

<p>Import umbrella headers for system frameworks and system libraries rather than
include individual files.</p>

<p>While it may seem tempting to include individual system headers from a framework
such as Cocoa or Foundation, in fact it’s less work on the compiler if you
include the top-level root framework. The root framework is generally
pre-compiled and can be loaded much more quickly. In addition, remember to use
<code class="language-plaintext highlighter-rouge">@import</code> or <code class="language-plaintext highlighter-rouge">#import</code> rather than <code class="language-plaintext highlighter-rouge">#include</code> for Objective-C frameworks.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@import</span> <span class="n">UIKit</span><span class="p">;</span>     <span class="c1">// GOOD.</span>
<span class="cp">#import &lt;Foundation/Foundation.h&gt;     // GOOD.
</span></code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="cp">#import &lt;Foundation/NSArray.h&gt;        // AVOID.
#import &lt;Foundation/NSString.h&gt;
</span><span class="p">...</span>
</code></pre></div></div>

<h3 id="avoid-messaging-the-current-object-within-initializers-and--dealloc">Avoid Messaging the Current Object Within Initializers and <code class="language-plaintext highlighter-rouge">-dealloc</code></h3>

<p>Code in initializers and <code class="language-plaintext highlighter-rouge">-dealloc</code> should avoid invoking instance methods when
possible.</p>

<p>Superclass initialization completes before subclass initialization. Until all
classes have had a chance to initialize their instance state any method
invocation on self may lead to a subclass operating on uninitialized instance
state.</p>

<p>A similar issue exists for <code class="language-plaintext highlighter-rouge">-dealloc</code>, where a method invocation may cause a
class to operate on state that has been deallocated.</p>

<p>One case where this is less obvious is property accessors. These can be
overridden just like any other selector. Whenever practical, directly assign to
and release ivars in initializers and <code class="language-plaintext highlighter-rouge">-dealloc</code>, rather than rely on accessors.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="n">init</span> <span class="p">{</span>
  <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_bar</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Beware of factoring common initialization code into helper methods:</p>

<ul>
  <li>Methods can be overridden in subclasses, either deliberately, or
accidentally due to naming collisions.</li>
  <li>When editing a helper method, it may not be obvious that the code is being
run from an initializer.</li>
</ul>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="n">init</span> <span class="p">{</span>
  <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">bar</span> <span class="o">=</span> <span class="mi">23</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
    <span class="p">[</span><span class="n">self</span> <span class="nf">sharedMethod</span><span class="p">];</span>  <span class="c1">// AVOID. Fragile to subclassing or future extension.</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dealloc</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">_notifier</span> <span class="nf">removeObserver</span><span class="p">:</span><span class="n">self</span><span class="p">];</span>  <span class="c1">// GOOD.</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dealloc</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">self</span> <span class="nf">removeNotifications</span><span class="p">];</span>  <span class="c1">// AVOID.</span>
<span class="p">}</span>
</code></pre></div></div>

<p>There are common cases where a class may need to use properties and methods
provided by a superclass during initialization. This commonly occurs for classes
derived from UIKit and AppKit base classes, among other base classes. Use your
judgement and knowledge of common practice when deciding whether to make an
exception to this rule.</p>

<h3 id="avoid-redundant-property-access">Avoid redundant property access</h3>

<p>Code should avoid redundant property access. Prefer to assign a property value
to a local variable when the property value is not expected to change and needs
to be used multiple times.</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">UIView</span> <span class="o">*</span><span class="n">view</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">;</span>
<span class="n">UIScrollView</span> <span class="o">*</span><span class="n">scrollView</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">;</span>
<span class="p">[</span><span class="n">scrollView</span><span class="p">.</span><span class="n">leadingAnchor</span> <span class="nf">constraintEqualToAnchor</span><span class="p">:</span><span class="n">view</span><span class="p">.</span><span class="n">leadingAnchor</span><span class="p">].</span><span class="n">active</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">[</span><span class="n">scrollView</span><span class="p">.</span><span class="n">trailingAnchor</span> <span class="nf">constraintEqualToAnchor</span><span class="p">:</span><span class="n">view</span><span class="p">.</span><span class="n">trailingAnchor</span><span class="p">].</span><span class="n">active</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">.</span><span class="n">loadingAnchor</span> <span class="nf">constraintEqualToAnchor</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">loadingAnchor</span><span class="p">].</span><span class="n">active</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">scrollView</span><span class="p">.</span><span class="n">trailingAnchor</span> <span class="nf">constraintEqualToAnchor</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">trailingAnchor</span><span class="p">].</span><span class="n">active</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</code></pre></div></div>

<p>When repeatedly referencing chained property invocations, prefer to capture the
repeated expression in a local variable:</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">baz</span><span class="p">.</span><span class="n">field1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">baz</span><span class="p">.</span><span class="n">field2</span> <span class="o">=</span> <span class="s">@"Hello"</span><span class="p">;</span>
<span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">baz</span><span class="p">.</span><span class="n">field3</span> <span class="o">=</span> <span class="mi">2</span><span class="p">.</span><span class="mi">71828183</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">Baz</span> <span class="o">*</span><span class="n">baz</span> <span class="o">=</span> <span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="p">.</span><span class="n">baz</span><span class="p">;</span>
<span class="n">baz</span><span class="p">.</span><span class="n">field1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">baz</span><span class="p">.</span><span class="n">field2</span> <span class="o">=</span> <span class="s">@"Hello"</span><span class="p">;</span>
<span class="n">baz</span><span class="p">.</span><span class="n">field3</span> <span class="o">=</span> <span class="mi">2</span><span class="p">.</span><span class="mi">71828183</span><span class="p">;</span>
</code></pre></div></div>

<p>Redundantly accessing the same properties results in multiple message dispatches
to fetch the same value, and under ARC requires retains and releases of any
returned objects; the compiler cannot optimize away these extra operations,
leading to slower execution and substantial increases in binary size.</p>

<p><a id="Mutables_Copies_Ownership"></a></p>

<h3 id="mutables-copies-and-ownership">Mutables, Copies and Ownership</h3>

<p>For <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ObjectMutability/ObjectMutability.html">Foundation and other hierarchies containing both immutable and mutable
subclasses</a>
a mutable subclass may be substituted for an immutable so long as the
immutable’s contract is honored.</p>

<p>The most common example of this sort of substitution are ownership transfers,
particularly for return values. In these cases an additional copy is not
necessary and returning the mutable subclass is more efficient.
<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ObjectMutability/ObjectMutability.html#//apple_ref/doc/uid/TP40010810-CH5-SW67">Callers are expected to treat return values as their declared type</a>,
and thus the return value will be treated as an immutable going forward.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">listOfThings</span> <span class="p">{</span>
  <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">generatedList</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="nf">array</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">NSInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">_someLimit</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">generatedList</span> <span class="nf">addObject</span><span class="p">:[</span><span class="n">self</span> <span class="nf">thingForIndex</span><span class="p">:</span><span class="n">i</span><span class="p">]];</span>
  <span class="p">}</span>
  <span class="c1">// Copy not necessary, ownership of generatedList is transferred.</span>
  <span class="k">return</span> <span class="n">generatedList</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This rule also applies to classes where only a mutable variant exists so long as
the ownership transfer is clear. Protos are a common example.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">SomeProtoMessage</span> <span class="o">*</span><span class="p">)</span><span class="nf">someMessageForValue</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">value</span> <span class="p">{</span>
  <span class="n">SomeProtoMessage</span> <span class="o">*</span><span class="n">message</span> <span class="o">=</span> <span class="p">[</span><span class="n">SomeProtoMessage</span> <span class="nf">message</span><span class="p">];</span>
  <span class="n">message</span><span class="p">.</span><span class="n">someValue</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">message</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It is not necessary to create a local immutable copy of a mutable type to match
the method signature of a method being called so long as the mutable argument
will not change for the duration of the method call. Called methods are expected
to treat arguments as the declared type, and take
<a href="#Defensive_Copies">defensive copies</a>
(<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ObjectMutability/ObjectMutability.html#//apple_ref/doc/uid/TP40010810-CH5-SW68">referred to by Apple as “snapshots”</a>)
if they intend to retain those arguments beyond the duration of the call.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">updatedThings</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="nf">array</span><span class="p">];</span>
<span class="p">[</span><span class="n">updatedThings</span> <span class="nf">addObject</span><span class="p">:</span><span class="n">newThing</span><span class="p">];</span>
<span class="p">[</span><span class="n">_otherManager</span> <span class="nf">updateWithCurrentThings</span><span class="p">:[</span><span class="n">updatedThings</span> <span class="nf">copy</span><span class="p">]];</span>  <span class="c1">// AVOID</span>
</code></pre></div></div>

<p><a id="Defensive_Copies"></a>
<a id="Setters_copy_NSStrings"></a></p>

<h3 id="copy-potentially-mutable-objects">Copy Potentially Mutable Objects</h3>

<p>Code receiving and retaining collections or other types with
<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ObjectMutability/ObjectMutability.html">mutable variants</a>
should consider that the passed object may be mutable, and thus an immutable or
mutable copy should be retained instead of the original object. In particular,
initializers and setters
<a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ObjectMutability/ObjectMutability.html#//apple_ref/doc/uid/TP40010810-CH5-SW68">should copy instead of retaining objects whose types have mutable variants</a>.</p>

<p>Synthesized accessors should use the <code class="language-plaintext highlighter-rouge">copy</code> keyword to ensure the generated code
matches these expectations.</p>

<p>NOTE: <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17-SW27">The <code class="language-plaintext highlighter-rouge">copy</code> property keyword only affects the synthesized setter and has
no effect on
getters</a>.
Since property keywords have no effect on direct ivar access custom accessors
must implement the same copy semantics.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSSet</span><span class="o">&lt;</span><span class="n">FilterThing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">filters</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithName</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">name</span>
                     <span class="nf">filters</span><span class="p">:(</span><span class="n">NSSet</span><span class="o">&lt;</span><span class="n">FilterThing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">filters</span> <span class="p">{</span>
  <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="nf">init</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="nf">copy</span><span class="p">];</span>
    <span class="n">_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span> <span class="nf">copy</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setFilters</span><span class="p">:(</span><span class="n">NSSet</span><span class="o">&lt;</span><span class="n">FilterThing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">filters</span> <span class="p">{</span>
  <span class="c1">// Ensure that we retain an immutable collection.</span>
  <span class="n">_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">filters</span> <span class="nf">copy</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Similarly, getters must return types that match the contract expectations of the
immutable types they return.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>


<span class="k">@implementation</span> <span class="nc">Foo</span> <span class="p">{</span>
  <span class="n">NSMutableArray</span><span class="o">&lt;</span><span class="n">ContentThing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">_currentContent</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span><span class="o">&lt;</span><span class="n">ContentThing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="n">currentContent</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">_currentContent</span> <span class="nf">copy</span><span class="p">];</span>
<span class="p">}</span>

</code></pre></div></div>

<p>All Objective-C protos are mutable and typically should be copied rather than
retained
<a href="#Mutables_Copies_Ownership">except in clear cases of ownership transfer</a>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setFooMessage</span><span class="p">:(</span><span class="n">FooMessage</span> <span class="o">*</span><span class="p">)</span><span class="nv">fooMessage</span> <span class="p">{</span>
  <span class="c1">// Copy proto to ensure no other retainer can mutate our value.</span>
  <span class="n">_fooMessage</span> <span class="o">=</span> <span class="p">[</span><span class="n">fooMessage</span> <span class="nf">copy</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">FooMessage</span> <span class="o">*</span><span class="p">)</span><span class="n">fooMessage</span> <span class="p">{</span>
  <span class="c1">// Copy proto to return so that caller cannot mutate our value.</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">_fooMessage</span> <span class="nf">copy</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Asynchronous code should copy potentially mutable objects prior to dispatch.
Objects captured by blocks are retained but not copied.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">doSomethingWithThings</span><span class="p">:(</span><span class="n">NSArray</span><span class="o">&lt;</span><span class="n">Thing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="p">)</span><span class="nv">things</span> <span class="p">{</span>
  <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">Thing</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">thingsToWorkOn</span> <span class="o">=</span> <span class="p">[</span><span class="n">things</span> <span class="nf">copy</span><span class="p">];</span>
  <span class="n">dispatch_async</span><span class="p">(</span><span class="n">_workQueue</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span> <span class="n">thing</span> <span class="k">in</span> <span class="n">thingsToWorkOn</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>NOTE: It is unnecessary to copy objects that do not have mutable variants, e.g.
<code class="language-plaintext highlighter-rouge">NSURL</code>, <code class="language-plaintext highlighter-rouge">NSNumber</code>, <code class="language-plaintext highlighter-rouge">NSDate</code>, <code class="language-plaintext highlighter-rouge">UIColor</code>, etc.</p>

<p><a id="Use_Lightweight_Generics_to_Document_Contained_Types"></a></p>

<h3 id="use-lightweight-generics-to-document-contained-types">Use Lightweight Generics to Document Contained Types</h3>

<p>All projects compiling on Xcode 7 or newer versions should make use of the
Objective-C lightweight generics notation to type contained objects.</p>

<p>Every <code class="language-plaintext highlighter-rouge">NSArray</code>, <code class="language-plaintext highlighter-rouge">NSDictionary</code>, or <code class="language-plaintext highlighter-rouge">NSSet</code> reference should be declared using
lightweight generics for improved type safety and to explicitly document usage.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">Location</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">locations</span><span class="p">;</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">readonly</span><span class="p">)</span> <span class="n">NSSet</span><span class="o">&lt;</span><span class="n">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">identifiers</span><span class="p">;</span>

<span class="n">NSMutableArray</span><span class="o">&lt;</span><span class="n">MyLocation</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">mutableLocations</span> <span class="o">=</span> <span class="p">[</span><span class="n">otherObject</span><span class="p">.</span><span class="n">locations</span> <span class="nf">mutableCopy</span><span class="p">];</span>
</code></pre></div></div>

<p>If the fully-annotated types become complex, consider using a typedef to
preserve readability.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">typedef</span> <span class="n">NSSet</span><span class="o">&lt;</span><span class="n">NSDictionary</span><span class="o">&lt;</span><span class="n">NSString</span> <span class="o">*</span><span class="p">,</span> <span class="n">NSDate</span> <span class="o">*&gt;</span> <span class="o">*&gt;</span> <span class="n">TimeZoneMappingSet</span><span class="p">;</span>
<span class="n">TimeZoneMappingSet</span> <span class="o">*</span><span class="n">timeZoneMappings</span> <span class="o">=</span> <span class="p">[</span><span class="n">TimeZoneMappingSet</span> <span class="nf">setWithObjects</span><span class="p">:...];</span>
</code></pre></div></div>

<p>Use the most descriptive common superclass or protocol available. In the most
generic case when nothing else is known, declare the collection to be explicitly
heterogeneous using id.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSArray</span><span class="o">&lt;</span><span class="n">id</span><span class="o">&gt;</span> <span class="o">*</span><span class="n">unknowns</span><span class="p">;</span>
</code></pre></div></div>

<p><a id="Avoid_Throwing_Exceptions"></a></p>

<h3 id="avoid-throwing-exceptions">Avoid Throwing Exceptions</h3>

<p>Don’t <code class="language-plaintext highlighter-rouge">@throw</code> Objective-C exceptions, but you should be prepared to catch them
from third-party or OS calls.</p>

<p>This follows the recommendation to use error objects for error delivery in
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Exceptions/Exceptions.html">Apple’s Introduction to Exception Programming Topics for
Cocoa</a>.</p>

<p>We do compile with <code class="language-plaintext highlighter-rouge">-fobjc-exceptions</code> (mainly so we get <code class="language-plaintext highlighter-rouge">@synchronized</code>), but
we don’t <code class="language-plaintext highlighter-rouge">@throw</code>. Use of <code class="language-plaintext highlighter-rouge">@try</code>, <code class="language-plaintext highlighter-rouge">@catch</code>, and <code class="language-plaintext highlighter-rouge">@finally</code> are allowed when
required to properly use 3rd party code or libraries. If you do use them, please
document exactly which methods you expect to throw.</p>

<p><a id="nil_Checks"></a></p>

<h3 id="nil-checks"><code class="language-plaintext highlighter-rouge">nil</code> Checks</h3>

<p>Avoid <code class="language-plaintext highlighter-rouge">nil</code> pointer checks that exist only to prevent sending messages to <code class="language-plaintext highlighter-rouge">nil</code>.
Sending a message to <code class="language-plaintext highlighter-rouge">nil</code> <a href="http://www.sealiesoftware.com/blog/archive/2012/2/29/objc_explain_return_value_of_message_to_nil.html">reliably
returns</a>
<code class="language-plaintext highlighter-rouge">nil</code> as a pointer, zero as an integer or floating-point value, structs
initialized to <code class="language-plaintext highlighter-rouge">0</code>, and <code class="language-plaintext highlighter-rouge">_Complex</code> values equal to <code class="language-plaintext highlighter-rouge">{0, 0}</code>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">dataSource</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// AVOID.</span>
  <span class="p">[</span><span class="n">dataSource</span> <span class="nf">moveItemAtIndex</span><span class="p">:</span><span class="mi">1</span> <span class="nf">toIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">dataSource</span> <span class="nf">moveItemAtIndex</span><span class="p">:</span><span class="mi">1</span> <span class="nf">toIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>  <span class="c1">// GOOD.</span>
</code></pre></div></div>

<p>Note that this applies to <code class="language-plaintext highlighter-rouge">nil</code> as a message target, not as a parameter value.
Individual methods may or may not safely handle <code class="language-plaintext highlighter-rouge">nil</code> parameter values.</p>

<p>Note too that this is distinct from checking C/C++ pointers and block pointers
against <code class="language-plaintext highlighter-rouge">NULL</code>, which the runtime does not handle and will cause your
application to crash. You still need to make sure you do not dereference a
<code class="language-plaintext highlighter-rouge">NULL</code> pointer.</p>

<h3 id="nullability">Nullability</h3>

<p>Interfaces can be decorated with nullability annotations to describe how the
interface should be used and how it behaves. Use of nullability regions (e.g.,
<code class="language-plaintext highlighter-rouge">NS_ASSUME_NONNULL_BEGIN</code> and <code class="language-plaintext highlighter-rouge">NS_ASSUME_NONNULL_END</code>) and explicit nullability
annotations are both accepted. Prefer using the <code class="language-plaintext highlighter-rouge">_Nullable</code> and <code class="language-plaintext highlighter-rouge">_Nonnull</code>
keywords over the <code class="language-plaintext highlighter-rouge">__nullable</code> and <code class="language-plaintext highlighter-rouge">__nonnull</code> keywords. For Objective-C methods
and properties prefer using the context-sensitive, non-underscored keywords,
e.g., <code class="language-plaintext highlighter-rouge">nonnull</code> and <code class="language-plaintext highlighter-rouge">nullable</code>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="cm">/** A class representing an owned book. */</span>
<span class="k">@interface</span> <span class="nc">GTMBook</span> <span class="p">:</span> <span class="nc">NSObject</span>

<span class="cm">/** The title of the book. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">nonnull</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">title</span><span class="p">;</span>

<span class="cm">/** The author of the book, if one exists. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">readonly</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">nullable</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">author</span><span class="p">;</span>

<span class="cm">/** The owner of the book. Setting nil resets to the default owner. */</span>
<span class="k">@property</span><span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span> <span class="n">null_resettable</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">owner</span><span class="p">;</span>

<span class="cm">/** Initializes a book with a title and an optional author. */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">nonnull</span> <span class="n">instancetype</span><span class="p">)</span><span class="nf">initWithTitle</span><span class="p">:(</span><span class="n">nonnull</span> <span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">title</span>
                               <span class="nf">author</span><span class="p">:(</span><span class="n">nullable</span> <span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">author</span>
    <span class="n">NS_DESIGNATED_INITIALIZER</span><span class="p">;</span>

<span class="cm">/** Returns nil because a book is expected to have a title. */</span>
<span class="k">-</span> <span class="p">(</span><span class="n">nullable</span> <span class="n">instancetype</span><span class="p">)</span><span class="n">init</span><span class="p">;</span>

<span class="k">@end</span>

<span class="cm">/** Loads books from the file specified by the given path. */</span>
<span class="n">NSArray</span><span class="o">&lt;</span><span class="n">GTMBook</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">_Nullable</span> <span class="nf">GTMLoadBooksFromFile</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">_Nonnull</span> <span class="n">path</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">NSArray</span><span class="o">&lt;</span><span class="n">GTMBook</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">__nullable</span> <span class="nf">GTMLoadBooksFromTitle</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="n">__nonnull</span> <span class="n">path</span><span class="p">);</span>
</code></pre></div></div>

<p>Do not assume that a pointer is not null based on a nonnull qualifier, because
the compiler only checks a subset of such cases, and does not guarantee that the
pointer is not null. Avoid intentionally violating nullability semantics
of function, method, and property declarations.</p>

<p><a id="BOOL_Pitfalls"></a></p>

<h3 id="bool-pitfalls">BOOL Pitfalls</h3>

<p><a id="BOOL_Expressions_Conversions"></a></p>
<h4 id="bool-expressions-and-conversions">BOOL Expressions and Conversions</h4>

<p>Be careful when converting general integral values to <code class="language-plaintext highlighter-rouge">BOOL</code>. Avoid comparing
directly with <code class="language-plaintext highlighter-rouge">YES</code> or comparing multiple <code class="language-plaintext highlighter-rouge">BOOL</code> values with comparison
operators.</p>

<p><code class="language-plaintext highlighter-rouge">BOOL</code> on some Apple platforms (notably Intel macOS, watchOS, and 32-bit iOS)
is defined as a signed <code class="language-plaintext highlighter-rouge">char</code>, so it may have values other than <code class="language-plaintext highlighter-rouge">YES</code> (<code class="language-plaintext highlighter-rouge">1</code>) and
<code class="language-plaintext highlighter-rouge">NO</code> (<code class="language-plaintext highlighter-rouge">0</code>). Do not cast or convert general integral values directly to <code class="language-plaintext highlighter-rouge">BOOL</code>.</p>

<p>Common mistakes include casting or converting an array’s size, a pointer value,
or the result of a bitwise logic operation to a <code class="language-plaintext highlighter-rouge">BOOL</code>. These operations can
depend on the value of the last byte of the integer value and result in an
unexpected <code class="language-plaintext highlighter-rouge">NO</code> value. Operations with NS_OPTIONS values and flag masking are
especially common errors.</p>

<p>When converting a general integral value to a <code class="language-plaintext highlighter-rouge">BOOL</code>, use conditional operators
to return a <code class="language-plaintext highlighter-rouge">YES</code> or <code class="language-plaintext highlighter-rouge">NO</code> value.</p>

<p>You can safely interchange and convert <code class="language-plaintext highlighter-rouge">BOOL</code>, <code class="language-plaintext highlighter-rouge">_Bool</code> and <code class="language-plaintext highlighter-rouge">bool</code> (see C++ Std
4.7.4, 4.12 and C99 Std 6.3.1.2). Use <code class="language-plaintext highlighter-rouge">BOOL</code> in Objective-C method signatures.</p>

<p>Using logical operators (<code class="language-plaintext highlighter-rouge">&amp;&amp;</code>, <code class="language-plaintext highlighter-rouge">||</code> and <code class="language-plaintext highlighter-rouge">!</code>) with <code class="language-plaintext highlighter-rouge">BOOL</code> is also valid and will
return values that can be safely converted to <code class="language-plaintext highlighter-rouge">BOOL</code> without the need for a
conditional operator.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isBold</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">fontTraits</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">NSFontBoldTrait</span><span class="p">;</span>  <span class="c1">// AVOID.</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isValid</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">];</span>  <span class="c1">// AVOID.</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isLongEnough</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)([</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">].</span><span class="n">count</span><span class="p">);</span>  <span class="c1">// AVOID.</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isBold</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">([</span><span class="n">self</span> <span class="nf">fontTraits</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">NSFontBoldTrait</span><span class="p">)</span> <span class="p">?</span> <span class="nb">YES</span> <span class="p">:</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isValid</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">]</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isLongEnough</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">].</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isEnabled</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">self</span> <span class="nf">isValid</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="n">self</span> <span class="nf">isBold</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Don’t directly compare <code class="language-plaintext highlighter-rouge">BOOL</code> variables directly with <code class="language-plaintext highlighter-rouge">YES</code>. Not only is
it harder to read for those well-versed in C, but the first point above
demonstrates that return values may not always be what you expect.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="n">BOOL</span> <span class="n">great</span> <span class="o">=</span> <span class="p">[</span><span class="n">foo</span> <span class="nf">isGreat</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="n">great</span> <span class="o">==</span> <span class="nb">YES</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// AVOID.</span>
  <span class="c1">// ...be great!</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">BOOL</span> <span class="n">great</span> <span class="o">=</span> <span class="p">[</span><span class="n">foo</span> <span class="nf">isGreat</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="n">great</span><span class="p">)</span> <span class="p">{</span>         <span class="c1">// GOOD.</span>
  <span class="c1">// ...be great!</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Don’t directly compare <code class="language-plaintext highlighter-rouge">BOOL</code> values using comparison operators. <code class="language-plaintext highlighter-rouge">BOOL</code>
values that are true may not be equal. Use logical operators in place
of bitwise comparisons of <code class="language-plaintext highlighter-rouge">BOOL</code> values.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">oldBOOLValue</span> <span class="o">!=</span> <span class="n">newBOOLValue</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// AVOID.</span>
  <span class="c1">// ... code that should only run when the value changes.</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="n">oldBoolValue</span> <span class="o">&amp;&amp;</span> <span class="n">newBoolValue</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">oldBoolValue</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">newBoolValue</span><span class="p">))</span> <span class="p">{</span>  <span class="c1">// GOOD.</span>
  <span class="c1">// ... code that should only run when the value changes.</span>
<span class="p">}</span>

<span class="c1">// GOOD, the results of logical operators on BOOLs are safe to compare.</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">oldBoolValue</span> <span class="o">!=</span> <span class="o">!</span><span class="n">newBoolValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... code that should only run when the value changes.</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="bool-literals">BOOL Literals</h4>

<p>The <a href="https://clang.llvm.org/docs/ObjectiveCLiterals.html#nsnumber-literals">BOOL NSNumber literals</a>
are <code class="language-plaintext highlighter-rouge">@YES</code> and <code class="language-plaintext highlighter-rouge">@NO</code> which are equivalent to <code class="language-plaintext highlighter-rouge">[NSNumber numberWithBool:...]</code>.</p>

<p>Avoid using <a href="https://clang.llvm.org/docs/ObjectiveCLiterals.html#boxed-expressions">boxed expressions</a>
to create BOOL values, including simple expressions like <code class="language-plaintext highlighter-rouge">@(YES)</code>.
Boxed expressions suffer from [the same pitfalls as other BOOL expressions]
(#BOOL_Expressions_Conversions) as boxing general integral values can
produce true or false <code class="language-plaintext highlighter-rouge">NSNumbers</code> that are not equal to <code class="language-plaintext highlighter-rouge">@YES</code> and <code class="language-plaintext highlighter-rouge">@NO</code>.</p>

<p>When converting a general integral value to a BOOL literal, use conditional
operators to convert to <code class="language-plaintext highlighter-rouge">@YES</code> or <code class="language-plaintext highlighter-rouge">@NO</code>. Do not embed a conditional operator
inside a boxed expression as this is equivalent to boxing general integral
values even when the result of the operation is a BOOL.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="p">[</span><span class="n">_boolArray</span> <span class="nf">addValue</span><span class="p">:</span><span class="err">@</span><span class="p">(</span><span class="nb">YES</span><span class="p">)];</span>  <span class="c1">// AVOID boxing even in simple cases.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isBold</span> <span class="o">=</span> <span class="err">@</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">fontTraits</span> <span class="o">&amp;</span> <span class="n">NSFontBoldTrait</span><span class="p">);</span>  <span class="c1">// AVOID.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">hasContent</span> <span class="o">=</span> <span class="err">@</span><span class="p">([</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">].</span><span class="n">length</span><span class="p">);</span>  <span class="c1">// AVOID.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isValid</span> <span class="o">=</span> <span class="err">@</span><span class="p">([</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">]);</span>  <span class="c1">// AVOID.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isStringNotNil</span> <span class="o">=</span> <span class="err">@</span><span class="p">([</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">]</span> <span class="p">?</span> <span class="nb">YES</span> <span class="p">:</span> <span class="nb">NO</span><span class="p">);</span>  <span class="c1">// AVOID.</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">_boolArray</span> <span class="nf">addValue</span><span class="p">:</span><span class="nb">@YES</span><span class="p">];</span>  <span class="c1">// GOOD.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isBold</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">fontTraits</span> <span class="o">&amp;</span> <span class="n">NSFontBoldTrait</span> <span class="p">?</span> <span class="nb">@YES</span> <span class="p">:</span> <span class="nb">@NO</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">hasContent</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">].</span><span class="n">length</span> <span class="p">?</span> <span class="nb">@YES</span> <span class="p">:</span> <span class="nb">@NO</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isValid</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">]</span> <span class="p">?</span> <span class="nb">@YES</span> <span class="p">:</span> <span class="nb">@NO</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
<span class="n">NSNumber</span> <span class="o">*</span><span class="n">isStringNotNil</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nf">stringValue</span><span class="p">]</span> <span class="p">?</span> <span class="nb">@YES</span> <span class="p">:</span> <span class="nb">@NO</span><span class="p">;</span>  <span class="c1">// GOOD.</span>
</code></pre></div></div>

<p><a id="Interfaces_Without_Instance_Variables"></a>
<a id="interfaces-without-instance-variables"></a></p>

<h3 id="containers-without-instance-variables">Containers Without Instance Variables</h3>

<p>Omit the empty set of braces on interfaces, class extensions, and
implementations without any instance variable declarations.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@interface</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="nc">NSObject</span>
<span class="c1">// Does a lot of stuff.</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">fooBarBam</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyClass</span> <span class="p">()</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">classExtensionMethod</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyClass</span>
<span class="c1">// Actual implementation.</span>
<span class="k">@end</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">@interface</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="p">{</span>
<span class="p">}</span>
<span class="c1">// Does a lot of stuff.</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">fooBarBam</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyClass</span> <span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">classExtensionMethod</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyClass</span> <span class="p">{</span>
<span class="p">}</span>
<span class="c1">// Actual implementation.</span>
<span class="k">@end</span>
</code></pre></div></div>

<p><a id="Cocoa_Patterns"></a></p>

<h2 id="cocoa-patterns">Cocoa Patterns</h2>

<p><a id="Delegate_Pattern"></a></p>

<h3 id="delegate-pattern">Delegate Pattern</h3>

<p>Delegates, target objects, and block pointers should not be retained when doing
so would create a retain cycle.</p>

<p>To avoid causing a retain cycle, a delegate or target pointer should be released
as soon as it is clear there will no longer be a need to message the object.</p>

<p>If there is no clear time at which the delegate or target pointer is no longer
needed, the pointer should only be retained weakly.</p>

<p>Block pointers cannot be retained weakly. To avoid causing retain cycles in the
client code, block pointers should be used for callbacks only where they can be
explicitly released after they have been called or once they are no longer
needed. Otherwise, callbacks should be done via weak delegate or target
pointers.</p>

<p><a id="Objective-C++"></a></p>

<h2 id="objective-c">Objective-C++</h2>

<p><a id="Style_Matches_the_Language"></a></p>

<h3 id="style-matches-the-language">Style Matches the Language</h3>

<p>Within an Objective-C++ source file, follow the style for the language of the
function or method you’re implementing. In order to minimize clashes between the
differing naming styles when mixing Cocoa/Objective-C and C++, follow the style
of the method being implemented.</p>

<p>For code in an <code class="language-plaintext highlighter-rouge">@implementation</code> block, use the Objective-C naming rules. For
code in a method of a C++ class, use the C++ naming rules.</p>

<p>For code in an Objective-C++ file outside of a class implementation, be
consistent within the file.</p>

<div class="language-objectivec++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="c1">// file: cross_platform_header.h</span>

<span class="k">class</span> <span class="nc">CrossPlatformAPI</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="p">...</span>
  <span class="kt">int</span> <span class="n">DoSomethingPlatformSpecific</span><span class="p">();</span>  <span class="c1">// impl on each platform</span>
 <span class="nl">private:</span>
  <span class="kt">int</span> <span class="n">an_instance_var_</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// file: mac_implementation.mm</span>
<span class="cp">#include</span> <span class="cpf">"cross_platform_header.h"</span><span class="cp">
</span>
<span class="cm">/** A typical Objective-C class, using Objective-C naming. */</span>
<span class="k">@interface</span> <span class="nc">MyDelegate</span> <span class="p">:</span> <span class="nc">NSObject</span> <span class="p">{</span>
 <span class="k">@private</span>
  <span class="kt">int</span> <span class="n">_instanceVar</span><span class="p">;</span>
  <span class="n">CrossPlatformAPI</span><span class="o">*</span> <span class="n">_backEndObject</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">respondToSomething</span><span class="o">:</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">something</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyDelegate</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">respondToSomething</span><span class="o">:</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">something</span> <span class="p">{</span>
  <span class="c1">// bridge from Cocoa through our C++ backend</span>
  <span class="n">_instanceVar</span> <span class="o">=</span> <span class="n">_backEndObject</span><span class="o">-&gt;</span><span class="n">DoSomethingPlatformSpecific</span><span class="p">();</span>
  <span class="n">NSString</span><span class="o">*</span> <span class="n">tempString</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithFormat</span><span class="p">:</span><span class="s">@"%d"</span><span class="p">,</span> <span class="n">_instanceVar</span><span class="p">];</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">tempString</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@end</span>

<span class="cm">/** The platform-specific implementation of the C++ class, using C++ naming. */</span>
<span class="kt">int</span> <span class="n">CrossPlatformAPI</span><span class="o">::</span><span class="n">DoSomethingPlatformSpecific</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">NSString</span><span class="o">*</span> <span class="n">temp_string</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nf">stringWithFormat</span><span class="p">:</span><span class="s">@"%d"</span><span class="p">,</span> <span class="n">an_instance_var_</span><span class="p">];</span>
  <span class="n">NSLog</span><span class="p">(</span><span class="s">@"%@"</span><span class="p">,</span> <span class="n">temp_string</span><span class="p">);</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">temp_string</span> <span class="nf">intValue</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Projects may opt to use an 80 column line length limit for consistency with
Google’s C++ style guide.</p>

<p><a id="Spacing_and_Formatting"></a></p>

<h2 id="spacing-and-formatting">Spacing and Formatting</h2>

<p><a id="Spaces_vs._Tabs"></a></p>

<h3 id="spaces-vs-tabs">Spaces vs. Tabs</h3>

<p>Use only spaces, and indent 2 spaces at a time. We use spaces for indentation.
Do not use tabs in your code.</p>

<p>You should set your editor to emit spaces when you hit the tab key, and to trim
trailing spaces on lines.</p>

<p><a id="Line_Length"></a></p>

<h3 id="line-length">Line Length</h3>

<p>The maximum line length for Objective-C files is 100 columns.</p>

<p><a id="Method_Declarations_and_Definitions"></a></p>

<h3 id="method-declarations-and-definitions">Method Declarations and Definitions</h3>

<p>One space should be used between the <code class="language-plaintext highlighter-rouge">-</code> or <code class="language-plaintext highlighter-rouge">+</code> and the return type. In general,
there should be no spacing in the parameter list except between parameters.</p>

<p>Methods should look like this:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">doSomethingWithString</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">theString</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The spacing before the asterisk is optional. When adding new code, be consistent
with the surrounding file’s style.</p>

<p>If a method declaration does not fit on a single line, put each parameter on its
own line. All lines except the first should be indented at least four spaces.
Colons before parameters should be aligned on all lines. If the colon before the
parameter on the first line of a method declaration is positioned such that
colon alignment would cause indentation on a subsequent line to be less than
four spaces, then colon alignment is only required for all lines except the
first. If a parameter declared after the <code class="language-plaintext highlighter-rouge">:</code> in a method declaration or
definition would cause the line limit to be exceeded, wrap the content to the
next line indented by at least four spaces.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">doSomethingWithFoo</span><span class="p">:(</span><span class="n">GTMFoo</span> <span class="o">*</span><span class="p">)</span><span class="nv">theFoo</span>
                      <span class="nf">rect</span><span class="p">:(</span><span class="n">NSRect</span><span class="p">)</span><span class="nv">theRect</span>
                  <span class="nf">interval</span><span class="p">:(</span><span class="kt">float</span><span class="p">)</span><span class="nv">theInterval</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">shortKeyword</span><span class="p">:(</span><span class="n">GTMFoo</span> <span class="o">*</span><span class="p">)</span><span class="nv">theFoo</span>
            <span class="nf">longerKeyword</span><span class="p">:(</span><span class="n">NSRect</span><span class="p">)</span><span class="nv">theRect</span>
    <span class="nf">someEvenLongerKeyword</span><span class="p">:(</span><span class="kt">float</span><span class="p">)</span><span class="nv">theInterval</span>
                    <span class="nf">error</span><span class="p">:(</span><span class="n">NSError</span> <span class="o">**</span><span class="p">)</span><span class="nv">theError</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="k">-</span> <span class="p">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">UIAdaptivePresentationControllerDelegate</span><span class="o">&gt;</span><span class="p">)</span>
    <span class="nf">adaptivePresentationControllerDelegateForViewController</span><span class="p">:(</span><span class="n">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">viewController</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">presentWithAdaptivePresentationControllerDelegate</span><span class="p">:</span>
    <span class="p">(</span><span class="n">id</span><span class="o">&lt;</span><span class="n">UIAdaptivePresentationControllerDelegate</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">delegate</span><span class="p">;</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">updateContentHeaderViewForExpansionToContentOffset</span><span class="p">:(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nv">contentOffset</span>
                                            <span class="nf">withController</span><span class="p">:</span>
                                                <span class="p">(</span><span class="n">GTMCollectionExpansionController</span> <span class="o">*</span><span class="p">)</span><span class="nv">controller</span><span class="p">;</span>

</code></pre></div></div>

<h3 id="function-declarations-and-definitions">Function Declarations and Definitions</h3>

<p>Prefer putting the return type on the same line as the function name and append
all parameters on the same line if they will fit. Wrap parameter lists which do
not fit on a single line as you would wrap arguments in a <a href="#Function_Calls">function
call</a>.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">NSString</span> <span class="o">*</span><span class="nf">GTMVersionString</span><span class="p">(</span><span class="kt">int</span> <span class="n">majorVersion</span><span class="p">,</span> <span class="kt">int</span> <span class="n">minorVersion</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">GTMSerializeDictionaryToFileOnDispatchQueue</span><span class="p">(</span>
    <span class="n">NSDictionary</span><span class="o">&lt;</span><span class="n">NSString</span> <span class="o">*</span><span class="p">,</span> <span class="n">NSString</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">dictionary</span><span class="p">,</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">filename</span><span class="p">,</span>
    <span class="n">dispatch_queue_t</span> <span class="n">queue</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Function declarations and definitions should also satisfy the following
conditions:</p>

<ul>
  <li>The opening parenthesis must always be on the same line as the function
name.</li>
  <li>If you cannot fit the return type and the function name on a single line,
break between them and do not indent the function name.</li>
  <li>There should never be a space before the opening parenthesis.</li>
  <li>There should never be a space between function parentheses and parameters.</li>
  <li>The open curly brace is always on the end of the last line of the function
declaration, not the start of the next line.</li>
  <li>The close curly brace is either on the last line by itself or on the same
line as the open curly brace.</li>
  <li>There should be a space between the close parenthesis and the open curly
brace.</li>
  <li>All parameters should be aligned if possible.</li>
  <li>Function scopes should be indented 2 spaces.</li>
  <li>Wrapped parameters should have a 4 space indent.</li>
</ul>

<p><a id="Conditionals"></a></p>

<h3 id="conditionals">Conditionals</h3>

<p>Include a space after <code class="language-plaintext highlighter-rouge">if</code>, <code class="language-plaintext highlighter-rouge">while</code>, <code class="language-plaintext highlighter-rouge">for</code>, and <code class="language-plaintext highlighter-rouge">switch</code>, and around comparison
operators.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">+</span><span class="k">+</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="n">test</span><span class="p">)</span> <span class="p">{};</span>
</code></pre></div></div>

<p>Braces may be omitted when a loop body or conditional statement fits on a single
line.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">hasSillyName</span><span class="p">)</span> <span class="n">LaughOutLoud</span><span class="p">();</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">BlowTheHorn</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">hasSillyName</span><span class="p">)</span>
  <span class="n">LaughOutLoud</span><span class="p">();</span>               <span class="c1">// AVOID.</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
  <span class="n">BlowTheHorn</span><span class="p">();</span>                <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>If an <code class="language-plaintext highlighter-rouge">if</code> clause has an <code class="language-plaintext highlighter-rouge">else</code> clause, both clauses should use braces.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">hasBaz</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  <span class="c1">// The else goes on the same line as the closing brace.</span>
  <span class="n">bar</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="k">if</span> <span class="p">(</span><span class="n">hasBaz</span><span class="p">)</span> <span class="n">foo</span><span class="p">();</span>
<span class="k">else</span> <span class="nf">bar</span><span class="p">();</span>        <span class="c1">// AVOID.</span>

<span class="k">if</span> <span class="p">(</span><span class="n">hasBaz</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="nf">bar</span><span class="p">();</span>      <span class="c1">// AVOID.</span>
</code></pre></div></div>

<p>Intentional fall-through to the next case should be documented with a comment
unless the case has no intervening code before the next case.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">switch</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
    <span class="p">...</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">j</span><span class="o">++</span><span class="p">;</span>
    <span class="c1">// Falls through.</span>
  <span class="k">case</span> <span class="mi">3</span><span class="p">:</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">case</span> <span class="mi">4</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">5</span><span class="p">:</span>
  <span class="k">case</span> <span class="mi">6</span><span class="p">:</span> <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a id="Expressions"></a></p>

<h3 id="expressions">Expressions</h3>

<p>Use a space around binary operators and assignments. Omit a space for a unary
operator. Do not add spaces inside parentheses.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">x</span> <span class="k">+</span> <span class="n">y</span> <span class="o">/</span> <span class="n">z</span><span class="p">;</span>
<span class="n">v</span> <span class="o">=</span> <span class="k">-</span><span class="n">y</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="k">+</span> <span class="n">z</span><span class="p">);</span>
</code></pre></div></div>

<p>Factors in an expression may omit spaces.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">w</span><span class="o">*</span><span class="n">x</span> <span class="k">+</span> <span class="n">y</span><span class="o">/</span><span class="n">z</span><span class="p">;</span>
</code></pre></div></div>

<p><a id="Method_Invocations"></a></p>

<h3 id="method-invocations">Method Invocations</h3>

<p>Method invocations should be formatted much like method declarations.</p>

<p>When there’s a choice of formatting styles, follow the convention already used
in a given source file. Invocations should have all arguments on one line:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">myObject</span> <span class="nf">doFooWith</span><span class="p">:</span><span class="n">arg1</span> <span class="nf">name</span><span class="p">:</span><span class="n">arg2</span> <span class="n">error</span><span class="o">:</span><span class="n">arg3</span><span class="p">];</span>
</code></pre></div></div>

<p>or have one argument per line, with colons aligned:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">myObject</span> <span class="nf">doFooWith</span><span class="p">:</span><span class="n">arg1</span>
               <span class="nl">name:</span><span class="n">arg2</span>
              <span class="nl">error:</span><span class="n">arg3</span><span class="p">];</span>
</code></pre></div></div>

<p>Don’t use any of these styles:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// AVOID:</span>

<span class="p">[</span><span class="n">myObject</span> <span class="nf">doFooWith</span><span class="p">:</span><span class="n">arg1</span> <span class="nf">name</span><span class="p">:</span><span class="n">arg2</span>  <span class="c1">// some lines with &gt;1 arg</span>
              <span class="n">error</span><span class="o">:</span><span class="n">arg3</span><span class="p">];</span>

<span class="p">[</span><span class="n">myObject</span> <span class="nf">doFooWith</span><span class="p">:</span><span class="n">arg1</span>
               <span class="nl">name:</span><span class="n">arg2</span> <span class="nf">error</span><span class="p">:</span><span class="n">arg3</span><span class="p">];</span>

<span class="p">[</span><span class="n">myObject</span> <span class="nf">doFooWith</span><span class="p">:</span><span class="n">arg1</span>
          <span class="nl">name:</span><span class="n">arg2</span>  <span class="c1">// aligning keywords instead of colons</span>
          <span class="nl">error:</span><span class="n">arg3</span><span class="p">];</span>
</code></pre></div></div>

<p>As with declarations and definitions, when the first keyword is shorter than the
others, indent the later lines by at least four spaces, maintaining colon
alignment:</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="p">[</span><span class="n">myObj</span> <span class="nf">short</span><span class="p">:</span><span class="n">arg1</span>
          <span class="nl">longKeyword:</span><span class="n">arg2</span>
    <span class="nl">evenLongerKeyword:</span><span class="n">arg3</span>
                <span class="nl">error:</span><span class="n">arg4</span><span class="p">];</span>
</code></pre></div></div>

<p>Invocations containing multiple inlined blocks may have their parameter names
left-aligned at a four space indent.</p>

<p><a id="Function_Calls"></a></p>

<h3 id="function-calls">Function Calls</h3>

<p>Function calls should include as many parameters as fit on each line, except
where shorter lines are needed for clarity or documentation of the parameters.</p>

<p>Continuation lines for function parameters may be indented to align with the
opening parenthesis, or may have a four-space indent.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="n">CFArrayRef</span> <span class="n">array</span> <span class="o">=</span> <span class="n">CFArrayCreate</span><span class="p">(</span><span class="n">kCFAllocatorDefault</span><span class="p">,</span> <span class="n">objects</span><span class="p">,</span> <span class="n">numberOfObjects</span><span class="p">,</span>
                                 <span class="o">&amp;</span><span class="n">kCFTypeArrayCallBacks</span><span class="p">);</span>

<span class="n">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="n">NSLocalizedStringWithDefaultValue</span><span class="p">(</span><span class="s">@"FEET"</span><span class="p">,</span> <span class="s">@"DistanceTable"</span><span class="p">,</span>
    <span class="n">resourceBundle</span><span class="p">,</span>  <span class="s">@"%@ feet"</span><span class="p">,</span> <span class="s">@"Distance for multiple feet"</span><span class="p">);</span>

<span class="n">UpdateTally</span><span class="p">(</span><span class="n">scores</span><span class="p">[</span><span class="nf">x</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span> <span class="k">+</span> <span class="n">bases</span><span class="p">[</span><span class="nf">x</span><span class="p">],</span>  <span class="c1">// Score heuristic.</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>

<span class="n">TransformImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span>
               <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span><span class="p">,</span>
               <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span>
               <span class="n">z1</span><span class="p">,</span> <span class="n">z2</span><span class="p">,</span> <span class="n">z3</span><span class="p">);</span>
</code></pre></div></div>

<p>Use local variables with descriptive names to shorten function calls and reduce
nesting of calls.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="kt">double</span> <span class="n">scoreHeuristic</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="nf">x</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span> <span class="k">+</span> <span class="n">bases</span><span class="p">[</span><span class="nf">x</span><span class="p">];</span>
<span class="n">UpdateTally</span><span class="p">(</span><span class="n">scoreHeuristic</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
</code></pre></div></div>

<p><a id="Exceptions"></a></p>

<h3 id="exceptions">Exceptions</h3>

<p>Format exceptions with <code class="language-plaintext highlighter-rouge">@catch</code> and <code class="language-plaintext highlighter-rouge">@finally</code> labels on the same line as the
preceding <code class="language-plaintext highlighter-rouge">}</code>. Add a space between the <code class="language-plaintext highlighter-rouge">@</code> label and the opening brace (<code class="language-plaintext highlighter-rouge">{</code>), as
well as between the <code class="language-plaintext highlighter-rouge">@catch</code> and the caught object declaration. If you must use
Objective-C exceptions, format them as follows. However, see <a href="#Avoid_Throwing_Exceptions">Avoid Throwing
Exceptions</a> for reasons why you should not be using
exceptions.</p>

<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// GOOD:</span>

<span class="k">@try</span> <span class="p">{</span>
  <span class="n">foo</span><span class="p">();</span>
<span class="p">}</span> <span class="k">@catch</span> <span class="p">(</span><span class="n">NSException</span> <span class="o">*</span><span class="n">ex</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">(</span><span class="n">ex</span><span class="p">);</span>
<span class="p">}</span> <span class="k">@finally</span> <span class="p">{</span>
  <span class="n">baz</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a id="Function_Length"></a></p>

<h3 id="function-length">Function Length</h3>

<p>Prefer small and focused functions.</p>

<p>Long functions and methods are occasionally appropriate, so no hard limit is
placed on function length. If a function exceeds about 40 lines, think about
whether it can be broken up without harming the structure of the program.</p>

<p>Even if your long function works perfectly now, someone modifying it in a few
months may add new behavior. This could result in bugs that are hard to find.
Keeping your functions short and simple makes it easier for other people to read
and modify your code.</p>

<p>When updating legacy code, consider also breaking long functions into smaller
and more manageable pieces.</p>

<p><a id="Vertical_Whitespace"></a></p>

<h3 id="vertical-whitespace">Vertical Whitespace</h3>

<p>Use vertical whitespace sparingly.</p>

<p>To allow more code to be easily viewed on a screen, avoid putting blank lines
just inside the braces of functions.</p>

<p>Limit blank lines to one or two between functions and between logical groups of
code.</p>

<p><a id="Objective-C_Style_Exceptions"></a></p>

<h2 id="objective-c-style-exceptions">Objective-C Style Exceptions</h2>

<p><a id="Indicating_style_exceptions"></a></p>

<h3 id="indicating-style-exceptions">Indicating style exceptions</h3>

<p>Lines of code that are not expected to adhere to these style recommendations
require <code class="language-plaintext highlighter-rouge">// NOLINT</code> at the end of the line or <code class="language-plaintext highlighter-rouge">// NOLINTNEXTLINE</code> at the end of
the previous line. Sometimes it is required that parts of Objective-C code must
ignore these style recommendations (for example code may be machine generated or
code constructs are such that its not possible to style correctly).</p>

<p>A <code class="language-plaintext highlighter-rouge">// NOLINT</code> comment on that line or <code class="language-plaintext highlighter-rouge">// NOLINTNEXTLINE</code> on the previous line
can be used to indicate to the reader that code is intentionally ignoring style
guidelines. In addition these annotations can also be picked up by automated
tools such as linters and handle code correctly. Note that there is a single
space between <code class="language-plaintext highlighter-rouge">//</code> and <code class="language-plaintext highlighter-rouge">NOLINT*</code>.</p>


      
      <div class="footer border-top border-gray-light mt-5 pt-3 text-right text-gray">
        This site is open source. <a href="https://github.com/google/styleguide/edit/gh-pages/objcguide.md">Improve this page</a>.
      </div>
      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
  </body>
</html>
